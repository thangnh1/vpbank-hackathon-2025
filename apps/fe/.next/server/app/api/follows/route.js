/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/follows/route";
exports.ids = ["app/api/follows/route"];
exports.modules = {

/***/ "(rsc)/./app/api/follows/route.ts":
/*!**********************************!*\
  !*** ./app/api/follows/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mock_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mock-db */ \"(rsc)/./lib/mock-db.ts\");\n\n\n// GET /api/follows\n// -> Trả về các campaign mà user đang theo dõi + activity gần đây\nasync function GET() {\n    const user = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getAuthUser)();\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Bạn chưa đăng nhập\"\n    }, {\n        status: 401\n    });\n    const data = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getFollowingDetails)(user.userId);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        ...data\n    });\n}\n// POST /api/follows\n// body: { campaignId: string }\nasync function POST(req) {\n    const user = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getAuthUser)();\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Bạn chưa đăng nhập\"\n    }, {\n        status: 401\n    });\n    const { campaignId } = await req.json().catch(()=>({\n            campaignId: undefined\n        }));\n    if (!campaignId) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Thiếu campaignId\"\n    }, {\n        status: 400\n    });\n    await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.followCampaign)(user.userId, String(campaignId));\n    const data = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getFollowingDetails)(user.userId);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        ...data\n    });\n}\n// DELETE /api/follows\n// body: { campaignId: string }\nasync function DELETE(req) {\n    const user = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getAuthUser)();\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Bạn chưa đăng nhập\"\n    }, {\n        status: 401\n    });\n    const { campaignId } = await req.json().catch(()=>({\n            campaignId: undefined\n        }));\n    if (!campaignId) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Thiếu campaignId\"\n    }, {\n        status: 400\n    });\n    await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.unfollowCampaign)(user.userId, String(campaignId));\n    const data = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getFollowingDetails)(user.userId);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        ...data\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2ZvbGxvd3Mvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEQ7QUFNdEM7QUFFdEIsbUJBQW1CO0FBQ25CLGtFQUFrRTtBQUMzRCxlQUFlSztJQUNwQixNQUFNQyxPQUFPLE1BQU1MLHlEQUFXQTtJQUM5QixJQUFJLENBQUNLLE1BQU0sT0FBT04scURBQVlBLENBQUNPLElBQUksQ0FBQztRQUFFQyxPQUFPO0lBQXFCLEdBQUc7UUFBRUMsUUFBUTtJQUFJO0lBRW5GLE1BQU1DLE9BQU8sTUFBTU4saUVBQW1CQSxDQUFDRSxLQUFLSyxNQUFNO0lBQ2xELE9BQU9YLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7UUFBRSxHQUFHRyxJQUFJO0lBQUM7QUFDckM7QUFFQSxvQkFBb0I7QUFDcEIsK0JBQStCO0FBQ3hCLGVBQWVFLEtBQUtDLEdBQWdCO0lBQ3pDLE1BQU1QLE9BQU8sTUFBTUwseURBQVdBO0lBQzlCLElBQUksQ0FBQ0ssTUFBTSxPQUFPTixxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1FBQUVDLE9BQU87SUFBcUIsR0FBRztRQUFFQyxRQUFRO0lBQUk7SUFFbkYsTUFBTSxFQUFFSyxVQUFVLEVBQUUsR0FBRyxNQUFNRCxJQUFJTixJQUFJLEdBQUdRLEtBQUssQ0FBQyxJQUFPO1lBQUVELFlBQVlFO1FBQVU7SUFDN0UsSUFBSSxDQUFDRixZQUFZLE9BQU9kLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7UUFBRUMsT0FBTztJQUFtQixHQUFHO1FBQUVDLFFBQVE7SUFBSTtJQUV2RixNQUFNUCw0REFBY0EsQ0FBQ0ksS0FBS0ssTUFBTSxFQUFFTSxPQUFPSDtJQUN6QyxNQUFNSixPQUFPLE1BQU1OLGlFQUFtQkEsQ0FBQ0UsS0FBS0ssTUFBTTtJQUNsRCxPQUFPWCxxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1FBQUVXLFNBQVM7UUFBTSxHQUFHUixJQUFJO0lBQUM7QUFDcEQ7QUFFQSxzQkFBc0I7QUFDdEIsK0JBQStCO0FBQ3hCLGVBQWVTLE9BQU9OLEdBQWdCO0lBQzNDLE1BQU1QLE9BQU8sTUFBTUwseURBQVdBO0lBQzlCLElBQUksQ0FBQ0ssTUFBTSxPQUFPTixxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1FBQUVDLE9BQU87SUFBcUIsR0FBRztRQUFFQyxRQUFRO0lBQUk7SUFFbkYsTUFBTSxFQUFFSyxVQUFVLEVBQUUsR0FBRyxNQUFNRCxJQUFJTixJQUFJLEdBQUdRLEtBQUssQ0FBQyxJQUFPO1lBQUVELFlBQVlFO1FBQVU7SUFDN0UsSUFBSSxDQUFDRixZQUFZLE9BQU9kLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7UUFBRUMsT0FBTztJQUFtQixHQUFHO1FBQUVDLFFBQVE7SUFBSTtJQUV2RixNQUFNTiw4REFBZ0JBLENBQUNHLEtBQUtLLE1BQU0sRUFBRU0sT0FBT0g7SUFDM0MsTUFBTUosT0FBTyxNQUFNTixpRUFBbUJBLENBQUNFLEtBQUtLLE1BQU07SUFDbEQsT0FBT1gscURBQVlBLENBQUNPLElBQUksQ0FBQztRQUFFVyxTQUFTO1FBQU0sR0FBR1IsSUFBSTtJQUFDO0FBQ3BEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxpbmhuXFxNWV9QUk9KRUNUc1xcdnBiYW5rLWhhY2thdGhvbi0yMDI1XFxhcHBzXFxmZVxcYXBwXFxhcGlcXGZvbGxvd3NcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXHJcbmltcG9ydCB7XHJcbiAgZ2V0QXV0aFVzZXIsXHJcbiAgZm9sbG93Q2FtcGFpZ24sXHJcbiAgdW5mb2xsb3dDYW1wYWlnbixcclxuICBnZXRGb2xsb3dpbmdEZXRhaWxzLFxyXG59IGZyb20gXCJAL2xpYi9tb2NrLWRiXCJcclxuXHJcbi8vIEdFVCAvYXBpL2ZvbGxvd3NcclxuLy8gLT4gVHLhuqMgduG7gSBjw6FjIGNhbXBhaWduIG3DoCB1c2VyIMSRYW5nIHRoZW8gZMO1aSArIGFjdGl2aXR5IGfhuqduIMSRw6J5XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldEF1dGhVc2VyKClcclxuICBpZiAoIXVzZXIpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkLhuqFuIGNoxrBhIMSRxINuZyBuaOG6rXBcIiB9LCB7IHN0YXR1czogNDAxIH0pXHJcblxyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGb2xsb3dpbmdEZXRhaWxzKHVzZXIudXNlcklkKVxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IC4uLmRhdGEgfSlcclxufVxyXG5cclxuLy8gUE9TVCAvYXBpL2ZvbGxvd3NcclxuLy8gYm9keTogeyBjYW1wYWlnbklkOiBzdHJpbmcgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldEF1dGhVc2VyKClcclxuICBpZiAoIXVzZXIpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkLhuqFuIGNoxrBhIMSRxINuZyBuaOG6rXBcIiB9LCB7IHN0YXR1czogNDAxIH0pXHJcblxyXG4gIGNvbnN0IHsgY2FtcGFpZ25JZCB9ID0gYXdhaXQgcmVxLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBjYW1wYWlnbklkOiB1bmRlZmluZWQgfSkpXHJcbiAgaWYgKCFjYW1wYWlnbklkKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJUaGnhur91IGNhbXBhaWduSWRcIiB9LCB7IHN0YXR1czogNDAwIH0pXHJcblxyXG4gIGF3YWl0IGZvbGxvd0NhbXBhaWduKHVzZXIudXNlcklkLCBTdHJpbmcoY2FtcGFpZ25JZCkpXHJcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEZvbGxvd2luZ0RldGFpbHModXNlci51c2VySWQpXHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgLi4uZGF0YSB9KVxyXG59XHJcblxyXG4vLyBERUxFVEUgL2FwaS9mb2xsb3dzXHJcbi8vIGJvZHk6IHsgY2FtcGFpZ25JZDogc3RyaW5nIH1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldEF1dGhVc2VyKClcclxuICBpZiAoIXVzZXIpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkLhuqFuIGNoxrBhIMSRxINuZyBuaOG6rXBcIiB9LCB7IHN0YXR1czogNDAxIH0pXHJcblxyXG4gIGNvbnN0IHsgY2FtcGFpZ25JZCB9ID0gYXdhaXQgcmVxLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBjYW1wYWlnbklkOiB1bmRlZmluZWQgfSkpXHJcbiAgaWYgKCFjYW1wYWlnbklkKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJUaGnhur91IGNhbXBhaWduSWRcIiB9LCB7IHN0YXR1czogNDAwIH0pXHJcblxyXG4gIGF3YWl0IHVuZm9sbG93Q2FtcGFpZ24odXNlci51c2VySWQsIFN0cmluZyhjYW1wYWlnbklkKSlcclxuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0Rm9sbG93aW5nRGV0YWlscyh1c2VyLnVzZXJJZClcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCAuLi5kYXRhIH0pXHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldEF1dGhVc2VyIiwiZm9sbG93Q2FtcGFpZ24iLCJ1bmZvbGxvd0NhbXBhaWduIiwiZ2V0Rm9sbG93aW5nRGV0YWlscyIsIkdFVCIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwidXNlcklkIiwiUE9TVCIsInJlcSIsImNhbXBhaWduSWQiLCJjYXRjaCIsInVuZGVmaW5lZCIsIlN0cmluZyIsInN1Y2Nlc3MiLCJERUxFVEUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/follows/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mock-db.ts":
/*!************************!*\
  !*** ./lib/mock-db.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   approveCampaignRequest: () => (/* binding */ approveCampaignRequest),\n/* harmony export */   createDonation: () => (/* binding */ createDonation),\n/* harmony export */   followCampaign: () => (/* binding */ followCampaign),\n/* harmony export */   getAuthUser: () => (/* binding */ getAuthUser),\n/* harmony export */   getCampaignById: () => (/* binding */ getCampaignById),\n/* harmony export */   getFollowingDetails: () => (/* binding */ getFollowingDetails),\n/* harmony export */   listCampaignRequests: () => (/* binding */ listCampaignRequests),\n/* harmony export */   listCampaigns: () => (/* binding */ listCampaigns),\n/* harmony export */   listDonations: () => (/* binding */ listDonations),\n/* harmony export */   listNotifications: () => (/* binding */ listNotifications),\n/* harmony export */   notify: () => (/* binding */ notify),\n/* harmony export */   rejectCampaignRequest: () => (/* binding */ rejectCampaignRequest),\n/* harmony export */   requestNewCampaign: () => (/* binding */ requestNewCampaign),\n/* harmony export */   unfollowCampaign: () => (/* binding */ unfollowCampaign),\n/* harmony export */   upsertCampaign: () => (/* binding */ upsertCampaign)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_3__);\n// lib/mock-db.ts\n\n\n\n\n\nconst SECRET = new TextEncoder().encode(process.env.JWT_SECRET || \"dev-secret-key-change-in-production\");\nconst DB_PATH = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"db.json\");\n// ==== Ensure DB & initial seed ====\nasync function ensureDb() {\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().access(DB_PATH);\n    } catch  {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().mkdir(path__WEBPACK_IMPORTED_MODULE_2___default().dirname(DB_PATH), {\n            recursive: true\n        });\n        const now = new Date().toISOString();\n        const seed = {\n            users: [\n                {\n                    userId: \"u_donor\",\n                    email: \"donor@demo.dev\",\n                    role: \"DONOR\",\n                    name: \"Nhà hảo tâm Demo\"\n                },\n                {\n                    userId: \"u_org\",\n                    email: \"org@demo.dev\",\n                    role: \"ORG_ADMIN\",\n                    name: \"Tổ chức Demo\"\n                },\n                {\n                    userId: \"u_auditor\",\n                    email: \"auditor@demo.dev\",\n                    role: \"AUDITOR\",\n                    name: \"Kiểm toán Demo\"\n                },\n                {\n                    userId: \"u_admin\",\n                    email: \"admin@demo.dev\",\n                    role: \"SUPERADMIN\",\n                    name: \"Quản trị Demo\"\n                }\n            ],\n            campaigns: [\n                {\n                    id: \"c_mien-trung-lu-lut\",\n                    title: \"Cứu trợ khẩn cấp miền Trung mùa lũ\",\n                    slug: \"cuu-tro-mien-trung\",\n                    summary: \"Hỗ trợ nhu yếu phẩm, máy lọc nước và di dời an toàn cho các hộ dân bị ảnh hưởng do mưa lũ tại miền Trung.\",\n                    goal: 500000000,\n                    raised: 0,\n                    status: \"ACTIVE\",\n                    ownerId: \"u_org\",\n                    tags: [\n                        \"cứu trợ\",\n                        \"thiên tai\",\n                        \"khẩn cấp\"\n                    ],\n                    createdAt: now,\n                    updatedAt: now\n                },\n                {\n                    id: \"c-sua-truong-vung-cao\",\n                    title: \"Sửa lớp học tạm vùng cao\",\n                    slug: \"sua-lop-hoc-vung-cao\",\n                    summary: \"Tu sửa phòng học, bổ sung bàn ghế và vật dụng mùa đông cho học sinh tại điểm trường vùng cao.\",\n                    goal: 300000000,\n                    raised: 0,\n                    status: \"ACTIVE\",\n                    ownerId: \"u_org\",\n                    tags: [\n                        \"giáo dục\",\n                        \"trẻ em\",\n                        \"cơ sở vật chất\"\n                    ],\n                    createdAt: now,\n                    updatedAt: now\n                }\n            ],\n            campaignRequests: [],\n            notifications: [],\n            follows: [],\n            activities: [],\n            donations: []\n        };\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().writeFile(DB_PATH, JSON.stringify(seed, null, 2), \"utf8\");\n    }\n}\nfunction ensureArray(v) {\n    return Array.isArray(v) ? v : [];\n}\nasync function migrateDbObject(obj) {\n    let changed = false;\n    const db = {\n        ...obj\n    };\n    // đảm bảo các bảng luôn tồn tại dạng mảng\n    const keys = [\n        \"users\",\n        \"campaigns\",\n        \"campaignRequests\",\n        \"notifications\",\n        \"follows\",\n        \"activities\",\n        \"donations\"\n    ];\n    for (const k of keys){\n        if (!Array.isArray(db[k])) {\n            db[k] = [];\n            changed = true;\n        }\n    }\n    // vệ sinh tối thiểu từng collection (optional, đề phòng null)\n    db.campaigns = ensureArray(db.campaigns);\n    db.campaignRequests = ensureArray(db.campaignRequests);\n    db.notifications = ensureArray(db.notifications);\n    db.follows = ensureArray(db.follows);\n    db.activities = ensureArray(db.activities);\n    db.donations = ensureArray(db.donations);\n    return {\n        db,\n        changed\n    };\n}\nasync function readDb() {\n    await ensureDb();\n    const raw = await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().readFile(DB_PATH, \"utf8\");\n    const parsed = JSON.parse(raw);\n    const { db, changed } = await migrateDbObject(parsed);\n    if (changed) {\n        // nếu schema cũ thiếu field → ghi lại file để lần sau khỏi migrate nữa\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().writeFile(DB_PATH, JSON.stringify(db, null, 2), \"utf8\");\n    }\n    return db;\n}\nasync function writeDb(next) {\n    const tmp = DB_PATH + \".tmp\";\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().writeFile(tmp, JSON.stringify(next, null, 2), \"utf8\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().rename(tmp, DB_PATH);\n}\n// ==== Auth helper (read JWT from cookie & verify) ====\nasync function getAuthUser() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const token = cookieStore.get(\"session\")?.value;\n    if (!token) return null;\n    try {\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtVerify)(token, SECRET);\n        return payload;\n    } catch  {\n        return null;\n    }\n}\n// ==== Campaign helpers ====\nasync function listCampaigns() {\n    const db = await readDb();\n    return db.campaigns;\n}\nasync function getCampaignById(id) {\n    const db = await readDb();\n    return db.campaigns.find((c)=>c.id === id) || null;\n}\nasync function upsertCampaign(input) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const slug = input.slug || input.title.toLowerCase().normalize(\"NFKD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)+/g, \"\");\n    if (input.id) {\n        const idx = db.campaigns.findIndex((c)=>c.id === input.id);\n        if (idx >= 0) {\n            db.campaigns[idx] = {\n                ...db.campaigns[idx],\n                ...input,\n                slug,\n                updatedAt: now\n            };\n        } else {\n            db.campaigns.push({\n                id: input.id,\n                title: input.title,\n                slug,\n                summary: input.summary || \"\",\n                goal: input.goal ?? 0,\n                raised: input.raised ?? 0,\n                status: input.status || \"DRAFT\",\n                ownerId: input.ownerId,\n                tags: input.tags || [],\n                createdAt: now,\n                updatedAt: now\n            });\n        }\n    } else {\n        db.campaigns.push({\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n            title: input.title,\n            slug,\n            summary: input.summary || \"\",\n            goal: input.goal ?? 0,\n            raised: input.raised ?? 0,\n            status: input.status || \"DRAFT\",\n            ownerId: input.ownerId,\n            tags: input.tags || [],\n            createdAt: now,\n            updatedAt: now\n        });\n    }\n    await writeDb(db);\n    return db.campaigns.find((c)=>c.slug === slug);\n}\n// ==== Campaign request (approve/reject + notify) ====\nasync function requestNewCampaign(params) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const req = {\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        title: params.title,\n        details: params.details,\n        requestedBy: params.requestedBy,\n        status: \"PENDING\",\n        createdAt: now,\n        updatedAt: now\n    };\n    db.campaignRequests.push(req);\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"CAMPAIGN_REQUESTED\",\n        actorId: params.requestedBy,\n        targetType: \"REQUEST\",\n        targetId: req.id,\n        meta: {\n            title: req.title\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return req;\n}\nasync function approveCampaignRequest(reqId, actorId, reason) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const req = db.campaignRequests.find((r)=>r.id === reqId);\n    if (!req) throw new Error(\"Không tìm thấy yêu cầu chiến dịch\");\n    req.status = \"APPROVED\";\n    req.reason = reason;\n    req.updatedAt = now;\n    // Notify requester\n    db.notifications.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        userId: req.requestedBy,\n        type: \"APPROVAL\",\n        title: \"Yêu cầu chiến dịch đã được duyệt\",\n        message: `Chiến dịch “${req.title}” đã được duyệt. ${reason ? \"Ghi chú: \" + reason : \"\"}`,\n        read: false,\n        createdAt: now\n    });\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"CAMPAIGN_APPROVED\",\n        actorId: actorId,\n        targetType: \"REQUEST\",\n        targetId: reqId,\n        meta: {\n            reason\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return req;\n}\nasync function rejectCampaignRequest(reqId, actorId, reason) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const req = db.campaignRequests.find((r)=>r.id === reqId);\n    if (!req) throw new Error(\"Không tìm thấy yêu cầu chiến dịch\");\n    req.status = \"REJECTED\";\n    req.reason = reason;\n    req.updatedAt = now;\n    // Notify requester\n    db.notifications.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        userId: req.requestedBy,\n        type: \"APPROVAL\",\n        title: \"Yêu cầu chiến dịch bị từ chối\",\n        message: `Chiến dịch “${req.title}” bị từ chối. Lý do: ${reason}`,\n        read: false,\n        createdAt: now\n    });\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"CAMPAIGN_REJECTED\",\n        actorId: actorId,\n        targetType: \"REQUEST\",\n        targetId: reqId,\n        meta: {\n            reason\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return req;\n}\n// ==== Notifications ====\nasync function listNotifications(userId) {\n    const db = await readDb();\n    return db.notifications.filter((n)=>n.userId === userId).sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n}\nasync function notify(userId, payload) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const n = {\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        userId,\n        read: false,\n        createdAt: now,\n        ...payload\n    };\n    db.notifications.push(n);\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"SYSTEM\",\n        actorId: userId,\n        targetType: \"NOTIFICATION\",\n        targetId: n.id,\n        meta: {\n            title: n.title\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return n;\n}\n// ==== Follow ====\nasync function followCampaign(userId, campaignId) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    if (!db.follows.find((f)=>f.userId === userId && f.campaignId === campaignId)) {\n        db.follows.push({\n            userId,\n            campaignId,\n            createdAt: now\n        });\n        db.activities.push({\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n            type: \"FOLLOWED\",\n            actorId: userId,\n            targetType: \"CAMPAIGN\",\n            targetId: campaignId,\n            createdAt: now\n        });\n        await writeDb(db);\n    }\n    return {\n        ok: true\n    };\n}\nasync function unfollowCampaign(userId, campaignId) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const next = db.follows.filter((f)=>!(f.userId === userId && f.campaignId === campaignId));\n    if (next.length !== db.follows.length) {\n        db.follows = next;\n        db.activities.push({\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n            type: \"UNFOLLOWED\",\n            actorId: userId,\n            targetType: \"CAMPAIGN\",\n            targetId: campaignId,\n            createdAt: now\n        });\n        await writeDb(db);\n    }\n    return {\n        ok: true\n    };\n}\nasync function getFollowingDetails(userId) {\n    const db = await readDb();\n    const followIds = db.follows.filter((f)=>f.userId === userId).map((f)=>f.campaignId);\n    const campaigns = db.campaigns.filter((c)=>followIds.includes(c.id));\n    const latestActivities = db.activities.filter((a)=>a.targetType === \"CAMPAIGN\" && a.targetId && followIds.includes(a.targetId)).sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1).slice(0, 50);\n    return {\n        campaigns,\n        latestActivities\n    };\n}\n// ==== Campaign requests list (role-aware) ====\nasync function listCampaignRequests(forUserId, role) {\n    const db = await (async ()=>{\n        // dùng readDb() nội bộ\n        const raw = await (await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs/promises */ \"fs/promises\", 23))).readFile((await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23))).join(process.cwd(), \"data\", \"db.json\"), \"utf8\");\n        return JSON.parse(raw);\n    })();\n    // Chưa đăng nhập thì không trả gì\n    if (!forUserId) return [];\n    // Admin / Auditor / Org Admin → xem tất cả\n    if (role === \"SUPERADMIN\" || role === \"AUDITOR\" || role === \"ORG_ADMIN\") {\n        return db.campaignRequests.sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n    }\n    // Donor / user thường → chỉ xem request của mình\n    return db.campaignRequests.filter((r)=>r.requestedBy === forUserId).sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n}\n// ==== Donations ====\nasync function listDonations(userId) {\n    const db = await readDb();\n    const arr = userId ? db.donations.filter((d)=>d.userId === userId) : db.donations;\n    // sort newest first\n    return arr.sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n}\nasync function createDonation(params) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const campaign = db.campaigns.find((c)=>c.id === params.campaignId);\n    if (!campaign) throw new Error(\"Không tìm thấy chiến dịch\");\n    const donation = {\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        campaignId: params.campaignId,\n        userId: params.userId,\n        amount: Math.max(0, Math.floor(params.amount || 0)),\n        status: \"ESCROWED\",\n        txId: `TXN-${Math.random().toString(36).slice(2, 10).toUpperCase()}`,\n        paymentMethod: params.paymentMethod || \"MOCK_QR\",\n        message: params.message,\n        createdAt: now\n    };\n    db.donations.push(donation);\n    // (Demo) Update campaign\n    campaign.raised = Math.max(0, (campaign.raised || 0) + donation.amount);\n    campaign.updatedAt = now;\n    // Activity\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"DONATION_CREATED\",\n        actorId: params.userId,\n        targetType: \"CAMPAIGN\",\n        targetId: params.campaignId,\n        meta: {\n            amount: donation.amount,\n            txId: donation.txId\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return donation;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSTtRQUFDO1FBQ3JEaEcsV0FBV25CO0lBQ2I7SUFFQSxNQUFNNEMsUUFBUVI7SUFDZCxPQUFPMEU7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxsaW5oblxcTVlfUFJPSkVDVHNcXHZwYmFuay1oYWNrYXRob24tMjAyNVxcYXBwc1xcZmVcXGxpYlxcbW9jay1kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvbW9jay1kYi50c1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiXHJcbmltcG9ydCB7IGp3dFZlcmlmeSwgSldUUGF5bG9hZCB9IGZyb20gXCJqb3NlXCJcclxuaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIlxyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiXHJcbmltcG9ydCBmcyBmcm9tIFwiZnMvcHJvbWlzZXNcIlxyXG5cclxuY29uc3QgU0VDUkVUID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJkZXYtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvblwiKVxyXG5jb25zdCBEQl9QQVRIID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiZGF0YVwiLCBcImRiLmpzb25cIilcclxuXHJcbi8vID09PT0gVHlwZXMgPT09PVxyXG5leHBvcnQgdHlwZSBVc2VyUm9sZSA9IFwiRE9OT1JcIiB8IFwiT1JHX0FETUlOXCIgfCBcIkFVRElUT1JcIiB8IFwiU1VQRVJBRE1JTlwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25QYXlsb2FkIGV4dGVuZHMgSldUUGF5bG9hZCB7XHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICBlbWFpbDogc3RyaW5nXHJcbiAgcm9sZTogVXNlclJvbGVcclxuICBpc0Fub255bW91cz86IGJvb2xlYW5cclxuICBhbm9uSWQ/OiBzdHJpbmdcclxuICBuYW1lPzogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FtcGFpZ24ge1xyXG4gIGlkOiBzdHJpbmdcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgc2x1Zzogc3RyaW5nXHJcbiAgc3VtbWFyeTogc3RyaW5nXHJcbiAgZ29hbDogbnVtYmVyXHJcbiAgcmFpc2VkOiBudW1iZXJcclxuICBzdGF0dXM6IFwiRFJBRlRcIiB8IFwiQUNUSVZFXCIgfCBcIlBBVVNFRFwiIHwgXCJDT01QTEVURURcIlxyXG4gIG93bmVySWQ6IHN0cmluZ1xyXG4gIHRhZ3M6IHN0cmluZ1tdXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxuICB1cGRhdGVkQXQ6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhbXBhaWduUmVxdWVzdCB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICBkZXRhaWxzOiBzdHJpbmdcclxuICByZXF1ZXN0ZWRCeTogc3RyaW5nXHJcbiAgc3RhdHVzOiBcIlBFTkRJTkdcIiB8IFwiQVBQUk9WRURcIiB8IFwiUkVKRUNURURcIlxyXG4gIHJlYXNvbj86IHN0cmluZ1xyXG4gIGNyZWF0ZWRBdDogc3RyaW5nXHJcbiAgdXBkYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBOb3RpZmljYXRpb24ge1xyXG4gIGlkOiBzdHJpbmdcclxuICB1c2VySWQ6IHN0cmluZ1xyXG4gIHR5cGU6IFwiU1lTVEVNXCIgfCBcIkNBTVBBSUdOXCIgfCBcIkFQUFJPVkFMXCJcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgbWVzc2FnZTogc3RyaW5nXHJcbiAgbWV0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuICByZWFkOiBib29sZWFuXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGb2xsb3cge1xyXG4gIHVzZXJJZDogc3RyaW5nXHJcbiAgY2FtcGFpZ25JZDogc3RyaW5nXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpdml0eSB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIHR5cGU6XHJcbiAgICB8IFwiRE9OQVRJT05fQ1JFQVRFRFwiXHJcbiAgICB8IFwiQ0FNUEFJR05fUkVRVUVTVEVEXCJcclxuICAgIHwgXCJDQU1QQUlHTl9BUFBST1ZFRFwiXHJcbiAgICB8IFwiQ0FNUEFJR05fUkVKRUNURURcIlxyXG4gICAgfCBcIkZPTExPV0VEXCJcclxuICAgIHwgXCJVTkZPTExPV0VEXCJcclxuICAgIHwgXCJTWVNURU1cIlxyXG4gIGFjdG9ySWQ6IHN0cmluZ1xyXG4gIHRhcmdldFR5cGU6IFwiQ0FNUEFJR05cIiB8IFwiUkVRVUVTVFwiIHwgXCJOT1RJRklDQVRJT05cIiB8IFwiU1lTVEVNXCJcclxuICB0YXJnZXRJZD86IHN0cmluZ1xyXG4gIG1ldGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgRG9uYXRpb25TdGF0dXMgPSBcIlBMRURHRURcIiB8IFwiRVNDUk9XRURcIiB8IFwiU0VUVExFRFwiIHwgXCJSRUZVTkRFRFwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERvbmF0aW9uIHtcclxuICBpZDogc3RyaW5nXHJcbiAgY2FtcGFpZ25JZDogc3RyaW5nXHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICBhbW91bnQ6IG51bWJlclxyXG4gIHN0YXR1czogRG9uYXRpb25TdGF0dXNcclxuICB0eElkOiBzdHJpbmdcclxuICBwYXltZW50TWV0aG9kOiBcIk1PQ0tfUVJcIiB8IFwiQkFOS19UUkFOU0ZFUlwiIHwgXCJDQVJEXCJcclxuICBtZXNzYWdlPzogc3RyaW5nXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxuICBvbmNoYWluQXQ/OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEQlNoYXBlIHtcclxuICB1c2VyczogQXJyYXk8eyB1c2VySWQ6IHN0cmluZzsgZW1haWw6IHN0cmluZzsgcm9sZTogVXNlclJvbGU7IG5hbWU/OiBzdHJpbmcgfT5cclxuICBjYW1wYWlnbnM6IENhbXBhaWduW11cclxuICBjYW1wYWlnblJlcXVlc3RzOiBDYW1wYWlnblJlcXVlc3RbXVxyXG4gIG5vdGlmaWNhdGlvbnM6IE5vdGlmaWNhdGlvbltdXHJcbiAgZm9sbG93czogRm9sbG93W11cclxuICBhY3Rpdml0aWVzOiBBY3Rpdml0eVtdXHJcbiAgZG9uYXRpb25zOiBEb25hdGlvbltdXHJcbn1cclxuXHJcbi8vID09PT0gRW5zdXJlIERCICYgaW5pdGlhbCBzZWVkID09PT1cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRGIoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGZzLmFjY2VzcyhEQl9QQVRIKVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgYXdhaXQgZnMubWtkaXIocGF0aC5kaXJuYW1lKERCX1BBVEgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcblxyXG4gICAgY29uc3Qgc2VlZDogREJTaGFwZSA9IHtcclxuICAgICAgdXNlcnM6IFtcclxuICAgICAgICB7IHVzZXJJZDogXCJ1X2Rvbm9yXCIsIGVtYWlsOiBcImRvbm9yQGRlbW8uZGV2XCIsIHJvbGU6IFwiRE9OT1JcIiwgbmFtZTogXCJOaMOgIGjhuqNvIHTDom0gRGVtb1wiIH0sXHJcbiAgICAgICAgeyB1c2VySWQ6IFwidV9vcmdcIiwgZW1haWw6IFwib3JnQGRlbW8uZGV2XCIsIHJvbGU6IFwiT1JHX0FETUlOXCIsIG5hbWU6IFwiVOG7lSBjaOG7qWMgRGVtb1wiIH0sXHJcbiAgICAgICAgeyB1c2VySWQ6IFwidV9hdWRpdG9yXCIsIGVtYWlsOiBcImF1ZGl0b3JAZGVtby5kZXZcIiwgcm9sZTogXCJBVURJVE9SXCIsIG5hbWU6IFwiS2nhu4NtIHRvw6FuIERlbW9cIiB9LFxyXG4gICAgICAgIHsgdXNlcklkOiBcInVfYWRtaW5cIiwgZW1haWw6IFwiYWRtaW5AZGVtby5kZXZcIiwgcm9sZTogXCJTVVBFUkFETUlOXCIsIG5hbWU6IFwiUXXhuqNuIHRy4buLIERlbW9cIiB9LFxyXG4gICAgICBdLFxyXG4gICAgICBjYW1wYWlnbnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCJjX21pZW4tdHJ1bmctbHUtbHV0XCIsXHJcbiAgICAgICAgICB0aXRsZTogXCJD4bupdSB0cuG7oyBraOG6qW4gY+G6pXAgbWnhu4FuIFRydW5nIG3DuWEgbMWpXCIsXHJcbiAgICAgICAgICBzbHVnOiBcImN1dS10cm8tbWllbi10cnVuZ1wiLFxyXG4gICAgICAgICAgc3VtbWFyeTpcclxuICAgICAgICAgICAgXCJI4buXIHRy4bujIG5odSB54bq/dSBwaOG6qW0sIG3DoXkgbOG7jWMgbsaw4bubYyB2w6AgZGkgZOG7nWkgYW4gdG/DoG4gY2hvIGPDoWMgaOG7mSBkw6JuIGLhu4sg4bqjbmggaMaw4bufbmcgZG8gbcawYSBsxakgdOG6oWkgbWnhu4FuIFRydW5nLlwiLFxyXG4gICAgICAgICAgZ29hbDogNTAwXzAwMF8wMDAsXHJcbiAgICAgICAgICByYWlzZWQ6IDAsXHJcbiAgICAgICAgICBzdGF0dXM6IFwiQUNUSVZFXCIsXHJcbiAgICAgICAgICBvd25lcklkOiBcInVfb3JnXCIsXHJcbiAgICAgICAgICB0YWdzOiBbXCJj4bupdSB0cuG7o1wiLCBcInRoacOqbiB0YWlcIiwgXCJraOG6qW4gY+G6pXBcIl0sXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbm93LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6IFwiYy1zdWEtdHJ1b25nLXZ1bmctY2FvXCIsXHJcbiAgICAgICAgICB0aXRsZTogXCJT4butYSBs4bubcCBo4buNYyB04bqhbSB2w7luZyBjYW9cIixcclxuICAgICAgICAgIHNsdWc6IFwic3VhLWxvcC1ob2MtdnVuZy1jYW9cIixcclxuICAgICAgICAgIHN1bW1hcnk6XHJcbiAgICAgICAgICAgIFwiVHUgc+G7rWEgcGjDsm5nIGjhu41jLCBi4buVIHN1bmcgYsOgbiBnaOG6vyB2w6AgduG6rXQgZOG7pW5nIG3DuWEgxJHDtG5nIGNobyBo4buNYyBzaW5oIHThuqFpIMSRaeG7g20gdHLGsOG7nW5nIHbDuW5nIGNhby5cIixcclxuICAgICAgICAgIGdvYWw6IDMwMF8wMDBfMDAwLFxyXG4gICAgICAgICAgcmFpc2VkOiAwLFxyXG4gICAgICAgICAgc3RhdHVzOiBcIkFDVElWRVwiLFxyXG4gICAgICAgICAgb3duZXJJZDogXCJ1X29yZ1wiLFxyXG4gICAgICAgICAgdGFnczogW1wiZ2nDoW8gZOG7pWNcIiwgXCJ0cuG6uyBlbVwiLCBcImPGoSBz4bufIHbhuq10IGNo4bqldFwiXSxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBub3csXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgY2FtcGFpZ25SZXF1ZXN0czogW10sXHJcbiAgICAgIG5vdGlmaWNhdGlvbnM6IFtdLFxyXG4gICAgICBmb2xsb3dzOiBbXSxcclxuICAgICAgYWN0aXZpdGllczogW10sXHJcbiAgICAgIGRvbmF0aW9uczogW10sXHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKERCX1BBVEgsIEpTT04uc3RyaW5naWZ5KHNlZWQsIG51bGwsIDIpLCBcInV0ZjhcIilcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gZW5zdXJlQXJyYXk8VCA9IGFueT4odjogYW55KTogVFtdIHtcclxuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2KSA/IHYgOiBbXVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBtaWdyYXRlRGJPYmplY3Qob2JqOiBhbnkpOiBQcm9taXNlPHsgZGI6IGFueTsgY2hhbmdlZDogYm9vbGVhbiB9PiB7XHJcbiAgbGV0IGNoYW5nZWQgPSBmYWxzZVxyXG4gIGNvbnN0IGRiID0geyAuLi5vYmogfVxyXG5cclxuICAvLyDEkeG6o20gYuG6o28gY8OhYyBi4bqjbmcgbHXDtG4gdOG7k24gdOG6oWkgZOG6oW5nIG3huqNuZ1xyXG4gIGNvbnN0IGtleXMgPSBbXHJcbiAgICBcInVzZXJzXCIsXHJcbiAgICBcImNhbXBhaWduc1wiLFxyXG4gICAgXCJjYW1wYWlnblJlcXVlc3RzXCIsXHJcbiAgICBcIm5vdGlmaWNhdGlvbnNcIixcclxuICAgIFwiZm9sbG93c1wiLFxyXG4gICAgXCJhY3Rpdml0aWVzXCIsXHJcbiAgICBcImRvbmF0aW9uc1wiLCAvLyBt4bubaSB0aMOqbVxyXG4gIF1cclxuICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRiW2tdKSkge1xyXG4gICAgICBkYltrXSA9IFtdXHJcbiAgICAgIGNoYW5nZWQgPSB0cnVlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB24buHIHNpbmggdOG7kWkgdGhp4buDdSB04burbmcgY29sbGVjdGlvbiAob3B0aW9uYWwsIMSR4buBIHBow7JuZyBudWxsKVxyXG4gIGRiLmNhbXBhaWducyA9IGVuc3VyZUFycmF5KGRiLmNhbXBhaWducylcclxuICBkYi5jYW1wYWlnblJlcXVlc3RzID0gZW5zdXJlQXJyYXkoZGIuY2FtcGFpZ25SZXF1ZXN0cylcclxuICBkYi5ub3RpZmljYXRpb25zID0gZW5zdXJlQXJyYXkoZGIubm90aWZpY2F0aW9ucylcclxuICBkYi5mb2xsb3dzID0gZW5zdXJlQXJyYXkoZGIuZm9sbG93cylcclxuICBkYi5hY3Rpdml0aWVzID0gZW5zdXJlQXJyYXkoZGIuYWN0aXZpdGllcylcclxuICBkYi5kb25hdGlvbnMgPSBlbnN1cmVBcnJheShkYi5kb25hdGlvbnMpXHJcblxyXG4gIHJldHVybiB7IGRiLCBjaGFuZ2VkIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcmVhZERiKCk6IFByb21pc2U8REJTaGFwZT4ge1xyXG4gIGF3YWl0IGVuc3VyZURiKClcclxuICBjb25zdCByYXcgPSBhd2FpdCBmcy5yZWFkRmlsZShEQl9QQVRILCBcInV0ZjhcIilcclxuICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdylcclxuXHJcbiAgY29uc3QgeyBkYiwgY2hhbmdlZCB9ID0gYXdhaXQgbWlncmF0ZURiT2JqZWN0KHBhcnNlZClcclxuICBpZiAoY2hhbmdlZCkge1xyXG4gICAgLy8gbuG6v3Ugc2NoZW1hIGPFqSB0aGnhur91IGZpZWxkIOKGkiBnaGkgbOG6oWkgZmlsZSDEkeG7gyBs4bqnbiBzYXUga2jhu49pIG1pZ3JhdGUgbuG7r2FcclxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShEQl9QQVRILCBKU09OLnN0cmluZ2lmeShkYiwgbnVsbCwgMiksIFwidXRmOFwiKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRiIGFzIERCU2hhcGVcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVEYihuZXh0OiBEQlNoYXBlKSB7XHJcbiAgY29uc3QgdG1wID0gREJfUEFUSCArIFwiLnRtcFwiXHJcbiAgYXdhaXQgZnMud3JpdGVGaWxlKHRtcCwgSlNPTi5zdHJpbmdpZnkobmV4dCwgbnVsbCwgMiksIFwidXRmOFwiKVxyXG4gIGF3YWl0IGZzLnJlbmFtZSh0bXAsIERCX1BBVEgpXHJcbn1cclxuXHJcbi8vID09PT0gQXV0aCBoZWxwZXIgKHJlYWQgSldUIGZyb20gY29va2llICYgdmVyaWZ5KSA9PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoVXNlcigpOiBQcm9taXNlPFNlc3Npb25QYXlsb2FkIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXHJcbiAgY29uc3QgdG9rZW4gPSBjb29raWVTdG9yZS5nZXQoXCJzZXNzaW9uXCIpPy52YWx1ZVxyXG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBTRUNSRVQpXHJcbiAgICByZXR1cm4gcGF5bG9hZCBhcyBTZXNzaW9uUGF5bG9hZFxyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT0gQ2FtcGFpZ24gaGVscGVycyA9PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0Q2FtcGFpZ25zKCkge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICByZXR1cm4gZGIuY2FtcGFpZ25zXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYW1wYWlnbkJ5SWQoaWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICByZXR1cm4gZGIuY2FtcGFpZ25zLmZpbmQoKGMpID0+IGMuaWQgPT09IGlkKSB8fCBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cHNlcnRDYW1wYWlnbihpbnB1dDogUGFydGlhbDxDYW1wYWlnbj4gJiB7IHRpdGxlOiBzdHJpbmc7IG93bmVySWQ6IHN0cmluZyB9KSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gIGNvbnN0IHNsdWcgPVxyXG4gICAgaW5wdXQuc2x1ZyB8fFxyXG4gICAgaW5wdXQudGl0bGVcclxuICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgLm5vcm1hbGl6ZShcIk5GS0RcIilcclxuICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csIFwiXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9bXmEtejAtOV0rL2csIFwiLVwiKVxyXG4gICAgICAucmVwbGFjZSgvKF4tfC0kKSsvZywgXCJcIilcclxuXHJcbiAgaWYgKGlucHV0LmlkKSB7XHJcbiAgICBjb25zdCBpZHggPSBkYi5jYW1wYWlnbnMuZmluZEluZGV4KChjKSA9PiBjLmlkID09PSBpbnB1dC5pZClcclxuICAgIGlmIChpZHggPj0gMCkge1xyXG4gICAgICBkYi5jYW1wYWlnbnNbaWR4XSA9IHtcclxuICAgICAgICAuLi5kYi5jYW1wYWlnbnNbaWR4XSxcclxuICAgICAgICAuLi5pbnB1dCxcclxuICAgICAgICBzbHVnLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbm93LFxyXG4gICAgICB9IGFzIENhbXBhaWduXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkYi5jYW1wYWlnbnMucHVzaCh7XHJcbiAgICAgICAgaWQ6IGlucHV0LmlkLFxyXG4gICAgICAgIHRpdGxlOiBpbnB1dC50aXRsZSxcclxuICAgICAgICBzbHVnLFxyXG4gICAgICAgIHN1bW1hcnk6IGlucHV0LnN1bW1hcnkgfHwgXCJcIixcclxuICAgICAgICBnb2FsOiBpbnB1dC5nb2FsID8/IDAsXHJcbiAgICAgICAgcmFpc2VkOiBpbnB1dC5yYWlzZWQgPz8gMCxcclxuICAgICAgICBzdGF0dXM6IChpbnB1dC5zdGF0dXMgYXMgYW55KSB8fCBcIkRSQUZUXCIsXHJcbiAgICAgICAgb3duZXJJZDogaW5wdXQub3duZXJJZCxcclxuICAgICAgICB0YWdzOiBpbnB1dC50YWdzIHx8IFtdLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbm93LFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBkYi5jYW1wYWlnbnMucHVzaCh7XHJcbiAgICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICAgIHRpdGxlOiBpbnB1dC50aXRsZSxcclxuICAgICAgc2x1ZyxcclxuICAgICAgc3VtbWFyeTogaW5wdXQuc3VtbWFyeSB8fCBcIlwiLFxyXG4gICAgICBnb2FsOiBpbnB1dC5nb2FsID8/IDAsXHJcbiAgICAgIHJhaXNlZDogaW5wdXQucmFpc2VkID8/IDAsXHJcbiAgICAgIHN0YXR1czogKGlucHV0LnN0YXR1cyBhcyBhbnkpIHx8IFwiRFJBRlRcIixcclxuICAgICAgb3duZXJJZDogaW5wdXQub3duZXJJZCxcclxuICAgICAgdGFnczogaW5wdXQudGFncyB8fCBbXSxcclxuICAgICAgY3JlYXRlZEF0OiBub3csXHJcbiAgICAgIHVwZGF0ZWRBdDogbm93LFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGF3YWl0IHdyaXRlRGIoZGIpXHJcbiAgcmV0dXJuIGRiLmNhbXBhaWducy5maW5kKChjKSA9PiBjLnNsdWcgPT09IHNsdWcpIVxyXG59XHJcblxyXG4vLyA9PT09IENhbXBhaWduIHJlcXVlc3QgKGFwcHJvdmUvcmVqZWN0ICsgbm90aWZ5KSA9PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0TmV3Q2FtcGFpZ24ocGFyYW1zOiB7XHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIGRldGFpbHM6IHN0cmluZ1xyXG4gIHJlcXVlc3RlZEJ5OiBzdHJpbmdcclxufSkge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICBjb25zdCByZXE6IENhbXBhaWduUmVxdWVzdCA9IHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB0aXRsZTogcGFyYW1zLnRpdGxlLFxyXG4gICAgZGV0YWlsczogcGFyYW1zLmRldGFpbHMsXHJcbiAgICByZXF1ZXN0ZWRCeTogcGFyYW1zLnJlcXVlc3RlZEJ5LFxyXG4gICAgc3RhdHVzOiBcIlBFTkRJTkdcIixcclxuICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gICAgdXBkYXRlZEF0OiBub3csXHJcbiAgfVxyXG4gIGRiLmNhbXBhaWduUmVxdWVzdHMucHVzaChyZXEpXHJcblxyXG4gIGRiLmFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgdHlwZTogXCJDQU1QQUlHTl9SRVFVRVNURURcIixcclxuICAgIGFjdG9ySWQ6IHBhcmFtcy5yZXF1ZXN0ZWRCeSxcclxuICAgIHRhcmdldFR5cGU6IFwiUkVRVUVTVFwiLFxyXG4gICAgdGFyZ2V0SWQ6IHJlcS5pZCxcclxuICAgIG1ldGE6IHsgdGl0bGU6IHJlcS50aXRsZSB9LFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfSlcclxuXHJcbiAgYXdhaXQgd3JpdGVEYihkYilcclxuICByZXR1cm4gcmVxXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHByb3ZlQ2FtcGFpZ25SZXF1ZXN0KHJlcUlkOiBzdHJpbmcsIGFjdG9ySWQ6IHN0cmluZywgcmVhc29uPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gIGNvbnN0IHJlcSA9IGRiLmNhbXBhaWduUmVxdWVzdHMuZmluZCgocikgPT4gci5pZCA9PT0gcmVxSWQpXHJcbiAgaWYgKCFyZXEpIHRocm93IG5ldyBFcnJvcihcIktow7RuZyB0w6xtIHRo4bqleSB5w6p1IGPhuqd1IGNoaeG6v24gZOG7i2NoXCIpXHJcbiAgcmVxLnN0YXR1cyA9IFwiQVBQUk9WRURcIlxyXG4gIHJlcS5yZWFzb24gPSByZWFzb25cclxuICByZXEudXBkYXRlZEF0ID0gbm93XHJcblxyXG4gIC8vIE5vdGlmeSByZXF1ZXN0ZXJcclxuICBkYi5ub3RpZmljYXRpb25zLnB1c2goe1xyXG4gICAgaWQ6IHJhbmRvbVVVSUQoKSxcclxuICAgIHVzZXJJZDogcmVxLnJlcXVlc3RlZEJ5LFxyXG4gICAgdHlwZTogXCJBUFBST1ZBTFwiLFxyXG4gICAgdGl0bGU6IFwiWcOqdSBj4bqndSBjaGnhur9uIGThu4tjaCDEkcOjIMSRxrDhu6NjIGR1eeG7h3RcIixcclxuICAgIG1lc3NhZ2U6IGBDaGnhur9uIGThu4tjaCDigJwke3JlcS50aXRsZX3igJ0gxJHDoyDEkcaw4bujYyBkdXnhu4d0LiAke3JlYXNvbiA/IFwiR2hpIGNow7o6IFwiICsgcmVhc29uIDogXCJcIn1gLFxyXG4gICAgcmVhZDogZmFsc2UsXHJcbiAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICB9KVxyXG5cclxuICBkYi5hY3Rpdml0aWVzLnB1c2goe1xyXG4gICAgaWQ6IHJhbmRvbVVVSUQoKSxcclxuICAgIHR5cGU6IFwiQ0FNUEFJR05fQVBQUk9WRURcIixcclxuICAgIGFjdG9ySWQ6IGFjdG9ySWQsXHJcbiAgICB0YXJnZXRUeXBlOiBcIlJFUVVFU1RcIixcclxuICAgIHRhcmdldElkOiByZXFJZCxcclxuICAgIG1ldGE6IHsgcmVhc29uIH0sXHJcbiAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICB9KVxyXG5cclxuICBhd2FpdCB3cml0ZURiKGRiKVxyXG4gIHJldHVybiByZXFcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlamVjdENhbXBhaWduUmVxdWVzdChyZXFJZDogc3RyaW5nLCBhY3RvcklkOiBzdHJpbmcsIHJlYXNvbjogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gIGNvbnN0IHJlcSA9IGRiLmNhbXBhaWduUmVxdWVzdHMuZmluZCgocikgPT4gci5pZCA9PT0gcmVxSWQpXHJcbiAgaWYgKCFyZXEpIHRocm93IG5ldyBFcnJvcihcIktow7RuZyB0w6xtIHRo4bqleSB5w6p1IGPhuqd1IGNoaeG6v24gZOG7i2NoXCIpXHJcbiAgcmVxLnN0YXR1cyA9IFwiUkVKRUNURURcIlxyXG4gIHJlcS5yZWFzb24gPSByZWFzb25cclxuICByZXEudXBkYXRlZEF0ID0gbm93XHJcblxyXG4gIC8vIE5vdGlmeSByZXF1ZXN0ZXJcclxuICBkYi5ub3RpZmljYXRpb25zLnB1c2goe1xyXG4gICAgaWQ6IHJhbmRvbVVVSUQoKSxcclxuICAgIHVzZXJJZDogcmVxLnJlcXVlc3RlZEJ5LFxyXG4gICAgdHlwZTogXCJBUFBST1ZBTFwiLFxyXG4gICAgdGl0bGU6IFwiWcOqdSBj4bqndSBjaGnhur9uIGThu4tjaCBi4buLIHThu6sgY2jhu5FpXCIsXHJcbiAgICBtZXNzYWdlOiBgQ2hp4bq/biBk4buLY2gg4oCcJHtyZXEudGl0bGV94oCdIGLhu4sgdOG7qyBjaOG7kWkuIEzDvSBkbzogJHtyZWFzb259YCxcclxuICAgIHJlYWQ6IGZhbHNlLFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfSlcclxuXHJcbiAgZGIuYWN0aXZpdGllcy5wdXNoKHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB0eXBlOiBcIkNBTVBBSUdOX1JFSkVDVEVEXCIsXHJcbiAgICBhY3RvcklkOiBhY3RvcklkLFxyXG4gICAgdGFyZ2V0VHlwZTogXCJSRVFVRVNUXCIsXHJcbiAgICB0YXJnZXRJZDogcmVxSWQsXHJcbiAgICBtZXRhOiB7IHJlYXNvbiB9LFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfSlcclxuXHJcbiAgYXdhaXQgd3JpdGVEYihkYilcclxuICByZXR1cm4gcmVxXHJcbn1cclxuXHJcbi8vID09PT0gTm90aWZpY2F0aW9ucyA9PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0Tm90aWZpY2F0aW9ucyh1c2VySWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICByZXR1cm4gZGIubm90aWZpY2F0aW9ucy5maWx0ZXIoKG4pID0+IG4udXNlcklkID09PSB1c2VySWQpLnNvcnQoKGEsIGIpID0+IChhLmNyZWF0ZWRBdCA8IGIuY3JlYXRlZEF0ID8gMSA6IC0xKSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG5vdGlmeShcclxuICB1c2VySWQ6IHN0cmluZyxcclxuICBwYXlsb2FkOiBPbWl0PE5vdGlmaWNhdGlvbiwgXCJpZFwiIHwgXCJ1c2VySWRcIiB8IFwiY3JlYXRlZEF0XCIgfCBcInJlYWRcIj5cclxuKSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gIGNvbnN0IG46IE5vdGlmaWNhdGlvbiA9IHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB1c2VySWQsXHJcbiAgICByZWFkOiBmYWxzZSxcclxuICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gICAgLi4ucGF5bG9hZCxcclxuICB9XHJcbiAgZGIubm90aWZpY2F0aW9ucy5wdXNoKG4pXHJcbiAgZGIuYWN0aXZpdGllcy5wdXNoKHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB0eXBlOiBcIlNZU1RFTVwiLFxyXG4gICAgYWN0b3JJZDogdXNlcklkLFxyXG4gICAgdGFyZ2V0VHlwZTogXCJOT1RJRklDQVRJT05cIixcclxuICAgIHRhcmdldElkOiBuLmlkLFxyXG4gICAgbWV0YTogeyB0aXRsZTogbi50aXRsZSB9LFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfSlcclxuICBhd2FpdCB3cml0ZURiKGRiKVxyXG4gIHJldHVybiBuXHJcbn1cclxuXHJcbi8vID09PT0gRm9sbG93ID09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZvbGxvd0NhbXBhaWduKHVzZXJJZDogc3RyaW5nLCBjYW1wYWlnbklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgaWYgKCFkYi5mb2xsb3dzLmZpbmQoKGYpID0+IGYudXNlcklkID09PSB1c2VySWQgJiYgZi5jYW1wYWlnbklkID09PSBjYW1wYWlnbklkKSkge1xyXG4gICAgZGIuZm9sbG93cy5wdXNoKHsgdXNlcklkLCBjYW1wYWlnbklkLCBjcmVhdGVkQXQ6IG5vdyB9KVxyXG4gICAgZGIuYWN0aXZpdGllcy5wdXNoKHtcclxuICAgICAgaWQ6IHJhbmRvbVVVSUQoKSxcclxuICAgICAgdHlwZTogXCJGT0xMT1dFRFwiLFxyXG4gICAgICBhY3RvcklkOiB1c2VySWQsXHJcbiAgICAgIHRhcmdldFR5cGU6IFwiQ0FNUEFJR05cIixcclxuICAgICAgdGFyZ2V0SWQ6IGNhbXBhaWduSWQsXHJcbiAgICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gICAgfSlcclxuICAgIGF3YWl0IHdyaXRlRGIoZGIpXHJcbiAgfVxyXG4gIHJldHVybiB7IG9rOiB0cnVlIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVuZm9sbG93Q2FtcGFpZ24odXNlcklkOiBzdHJpbmcsIGNhbXBhaWduSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICBjb25zdCBuZXh0ID0gZGIuZm9sbG93cy5maWx0ZXIoKGYpID0+ICEoZi51c2VySWQgPT09IHVzZXJJZCAmJiBmLmNhbXBhaWduSWQgPT09IGNhbXBhaWduSWQpKVxyXG4gIGlmIChuZXh0Lmxlbmd0aCAhPT0gZGIuZm9sbG93cy5sZW5ndGgpIHtcclxuICAgIGRiLmZvbGxvd3MgPSBuZXh0XHJcbiAgICBkYi5hY3Rpdml0aWVzLnB1c2goe1xyXG4gICAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgICB0eXBlOiBcIlVORk9MTE9XRURcIixcclxuICAgICAgYWN0b3JJZDogdXNlcklkLFxyXG4gICAgICB0YXJnZXRUeXBlOiBcIkNBTVBBSUdOXCIsXHJcbiAgICAgIHRhcmdldElkOiBjYW1wYWlnbklkLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgIH0pXHJcbiAgICBhd2FpdCB3cml0ZURiKGRiKVxyXG4gIH1cclxuICByZXR1cm4geyBvazogdHJ1ZSB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGb2xsb3dpbmdEZXRhaWxzKHVzZXJJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGNvbnN0IGZvbGxvd0lkcyA9IGRiLmZvbGxvd3MuZmlsdGVyKChmKSA9PiBmLnVzZXJJZCA9PT0gdXNlcklkKS5tYXAoKGYpID0+IGYuY2FtcGFpZ25JZClcclxuICBjb25zdCBjYW1wYWlnbnMgPSBkYi5jYW1wYWlnbnMuZmlsdGVyKChjKSA9PiBmb2xsb3dJZHMuaW5jbHVkZXMoYy5pZCkpXHJcbiAgY29uc3QgbGF0ZXN0QWN0aXZpdGllcyA9IGRiLmFjdGl2aXRpZXNcclxuICAgIC5maWx0ZXIoKGEpID0+IGEudGFyZ2V0VHlwZSA9PT0gXCJDQU1QQUlHTlwiICYmIGEudGFyZ2V0SWQgJiYgZm9sbG93SWRzLmluY2x1ZGVzKGEudGFyZ2V0SWQpKVxyXG4gICAgLnNvcnQoKGEsIGIpID0+IChhLmNyZWF0ZWRBdCA8IGIuY3JlYXRlZEF0ID8gMSA6IC0xKSlcclxuICAgIC5zbGljZSgwLCA1MClcclxuXHJcbiAgcmV0dXJuIHsgY2FtcGFpZ25zLCBsYXRlc3RBY3Rpdml0aWVzIH1cclxufVxyXG4vLyA9PT09IENhbXBhaWduIHJlcXVlc3RzIGxpc3QgKHJvbGUtYXdhcmUpID09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RDYW1wYWlnblJlcXVlc3RzKGZvclVzZXJJZD86IHN0cmluZywgcm9sZT86IFVzZXJSb2xlKSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCAoYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gZMO5bmcgcmVhZERiKCkgbuG7mWkgYuG7mVxyXG4gICAgY29uc3QgcmF3ID0gYXdhaXQgKGF3YWl0IGltcG9ydChcImZzL3Byb21pc2VzXCIpKS5yZWFkRmlsZShcclxuICAgICAgKGF3YWl0IGltcG9ydChcInBhdGhcIikpLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJkYXRhXCIsIFwiZGIuanNvblwiKSxcclxuICAgICAgXCJ1dGY4XCJcclxuICAgIClcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHJhdykgYXMgREJTaGFwZVxyXG4gIH0pKClcclxuXHJcbiAgLy8gQ2jGsGEgxJHEg25nIG5o4bqtcCB0aMOsIGtow7RuZyB0cuG6oyBnw6xcclxuICBpZiAoIWZvclVzZXJJZCkgcmV0dXJuIFtdXHJcblxyXG4gIC8vIEFkbWluIC8gQXVkaXRvciAvIE9yZyBBZG1pbiDihpIgeGVtIHThuqV0IGPhuqNcclxuICBpZiAocm9sZSA9PT0gXCJTVVBFUkFETUlOXCIgfHwgcm9sZSA9PT0gXCJBVURJVE9SXCIgfHwgcm9sZSA9PT0gXCJPUkdfQURNSU5cIikge1xyXG4gICAgcmV0dXJuIGRiLmNhbXBhaWduUmVxdWVzdHMuc29ydCgoYSwgYikgPT4gKGEuY3JlYXRlZEF0IDwgYi5jcmVhdGVkQXQgPyAxIDogLTEpKVxyXG4gIH1cclxuXHJcbiAgLy8gRG9ub3IgLyB1c2VyIHRoxrDhu51uZyDihpIgY2jhu4kgeGVtIHJlcXVlc3QgY+G7p2EgbcOsbmhcclxuICByZXR1cm4gZGIuY2FtcGFpZ25SZXF1ZXN0c1xyXG4gICAgLmZpbHRlcigocikgPT4gci5yZXF1ZXN0ZWRCeSA9PT0gZm9yVXNlcklkKVxyXG4gICAgLnNvcnQoKGEsIGIpID0+IChhLmNyZWF0ZWRBdCA8IGIuY3JlYXRlZEF0ID8gMSA6IC0xKSlcclxufVxyXG5cclxuLy8gPT09PSBEb25hdGlvbnMgPT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdERvbmF0aW9ucyh1c2VySWQ/OiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgY29uc3QgYXJyID0gdXNlcklkID8gZGIuZG9uYXRpb25zLmZpbHRlcigoZCkgPT4gZC51c2VySWQgPT09IHVzZXJJZCkgOiBkYi5kb25hdGlvbnNcclxuICAvLyBzb3J0IG5ld2VzdCBmaXJzdFxyXG4gIHJldHVybiBhcnIuc29ydCgoYSwgYikgPT4gKGEuY3JlYXRlZEF0IDwgYi5jcmVhdGVkQXQgPyAxIDogLTEpKVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRG9uYXRpb24ocGFyYW1zOiB7XHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICBjYW1wYWlnbklkOiBzdHJpbmdcclxuICBhbW91bnQ6IG51bWJlclxyXG4gIHBheW1lbnRNZXRob2Q6IERvbmF0aW9uW1wicGF5bWVudE1ldGhvZFwiXVxyXG4gIG1lc3NhZ2U/OiBzdHJpbmdcclxufSkge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuXHJcbiAgY29uc3QgY2FtcGFpZ24gPSBkYi5jYW1wYWlnbnMuZmluZCgoYykgPT4gYy5pZCA9PT0gcGFyYW1zLmNhbXBhaWduSWQpXHJcbiAgaWYgKCFjYW1wYWlnbikgdGhyb3cgbmV3IEVycm9yKFwiS2jDtG5nIHTDrG0gdGjhuqV5IGNoaeG6v24gZOG7i2NoXCIpXHJcblxyXG4gIGNvbnN0IGRvbmF0aW9uOiBEb25hdGlvbiA9IHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICBjYW1wYWlnbklkOiBwYXJhbXMuY2FtcGFpZ25JZCxcclxuICAgIHVzZXJJZDogcGFyYW1zLnVzZXJJZCxcclxuICAgIGFtb3VudDogTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihwYXJhbXMuYW1vdW50IHx8IDApKSxcclxuICAgIHN0YXR1czogXCJFU0NST1dFRFwiLFxyXG4gICAgdHhJZDogYFRYTi0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIsIDEwKS50b1VwcGVyQ2FzZSgpfWAsXHJcbiAgICBwYXltZW50TWV0aG9kOiBwYXJhbXMucGF5bWVudE1ldGhvZCB8fCBcIk1PQ0tfUVJcIixcclxuICAgIG1lc3NhZ2U6IHBhcmFtcy5tZXNzYWdlLFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfVxyXG5cclxuICBkYi5kb25hdGlvbnMucHVzaChkb25hdGlvbilcclxuXHJcbiAgLy8gKERlbW8pIFVwZGF0ZSBjYW1wYWlnblxyXG4gIGNhbXBhaWduLnJhaXNlZCA9IE1hdGgubWF4KDAsIChjYW1wYWlnbi5yYWlzZWQgfHwgMCkgKyBkb25hdGlvbi5hbW91bnQpXHJcbiAgY2FtcGFpZ24udXBkYXRlZEF0ID0gbm93XHJcblxyXG4gIC8vIEFjdGl2aXR5XHJcbiAgZGIuYWN0aXZpdGllcy5wdXNoKHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB0eXBlOiBcIkRPTkFUSU9OX0NSRUFURURcIixcclxuICAgIGFjdG9ySWQ6IHBhcmFtcy51c2VySWQsXHJcbiAgICB0YXJnZXRUeXBlOiBcIkNBTVBBSUdOXCIsXHJcbiAgICB0YXJnZXRJZDogcGFyYW1zLmNhbXBhaWduSWQsXHJcbiAgICBtZXRhOiB7IGFtb3VudDogZG9uYXRpb24uYW1vdW50LCB0eElkOiBkb25hdGlvbi50eElkIH0sXHJcbiAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICB9KVxyXG5cclxuICBhd2FpdCB3cml0ZURiKGRiKVxyXG4gIHJldHVybiBkb25hdGlvblxyXG59XHJcbiJdLCJuYW1lcyI6WyJjb29raWVzIiwiand0VmVyaWZ5IiwicmFuZG9tVVVJRCIsInBhdGgiLCJmcyIsIlNFQ1JFVCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJEQl9QQVRIIiwiam9pbiIsImN3ZCIsImVuc3VyZURiIiwiYWNjZXNzIiwibWtkaXIiLCJkaXJuYW1lIiwicmVjdXJzaXZlIiwibm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2VlZCIsInVzZXJzIiwidXNlcklkIiwiZW1haWwiLCJyb2xlIiwibmFtZSIsImNhbXBhaWducyIsImlkIiwidGl0bGUiLCJzbHVnIiwic3VtbWFyeSIsImdvYWwiLCJyYWlzZWQiLCJzdGF0dXMiLCJvd25lcklkIiwidGFncyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImNhbXBhaWduUmVxdWVzdHMiLCJub3RpZmljYXRpb25zIiwiZm9sbG93cyIsImFjdGl2aXRpZXMiLCJkb25hdGlvbnMiLCJ3cml0ZUZpbGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZW5zdXJlQXJyYXkiLCJ2IiwiQXJyYXkiLCJpc0FycmF5IiwibWlncmF0ZURiT2JqZWN0Iiwib2JqIiwiY2hhbmdlZCIsImRiIiwia2V5cyIsImsiLCJyZWFkRGIiLCJyYXciLCJyZWFkRmlsZSIsInBhcnNlZCIsInBhcnNlIiwid3JpdGVEYiIsIm5leHQiLCJ0bXAiLCJyZW5hbWUiLCJnZXRBdXRoVXNlciIsImNvb2tpZVN0b3JlIiwidG9rZW4iLCJnZXQiLCJ2YWx1ZSIsInBheWxvYWQiLCJsaXN0Q2FtcGFpZ25zIiwiZ2V0Q2FtcGFpZ25CeUlkIiwiZmluZCIsImMiLCJ1cHNlcnRDYW1wYWlnbiIsImlucHV0IiwidG9Mb3dlckNhc2UiLCJub3JtYWxpemUiLCJyZXBsYWNlIiwiaWR4IiwiZmluZEluZGV4IiwicHVzaCIsInJlcXVlc3ROZXdDYW1wYWlnbiIsInBhcmFtcyIsInJlcSIsImRldGFpbHMiLCJyZXF1ZXN0ZWRCeSIsInR5cGUiLCJhY3RvcklkIiwidGFyZ2V0VHlwZSIsInRhcmdldElkIiwibWV0YSIsImFwcHJvdmVDYW1wYWlnblJlcXVlc3QiLCJyZXFJZCIsInJlYXNvbiIsInIiLCJFcnJvciIsIm1lc3NhZ2UiLCJyZWFkIiwicmVqZWN0Q2FtcGFpZ25SZXF1ZXN0IiwibGlzdE5vdGlmaWNhdGlvbnMiLCJmaWx0ZXIiLCJuIiwic29ydCIsImEiLCJiIiwibm90aWZ5IiwiZm9sbG93Q2FtcGFpZ24iLCJjYW1wYWlnbklkIiwiZiIsIm9rIiwidW5mb2xsb3dDYW1wYWlnbiIsImxlbmd0aCIsImdldEZvbGxvd2luZ0RldGFpbHMiLCJmb2xsb3dJZHMiLCJtYXAiLCJpbmNsdWRlcyIsImxhdGVzdEFjdGl2aXRpZXMiLCJzbGljZSIsImxpc3RDYW1wYWlnblJlcXVlc3RzIiwiZm9yVXNlcklkIiwibGlzdERvbmF0aW9ucyIsImFyciIsImQiLCJjcmVhdGVEb25hdGlvbiIsImNhbXBhaWduIiwiZG9uYXRpb24iLCJhbW91bnQiLCJNYXRoIiwibWF4IiwiZmxvb3IiLCJ0eElkIiwicmFuZG9tIiwidG9TdHJpbmciLCJ0b1VwcGVyQ2FzZSIsInBheW1lbnRNZXRob2QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/mock-db.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffollows%2Froute&page=%2Fapi%2Ffollows%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffollows%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffollows%2Froute&page=%2Fapi%2Ffollows%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffollows%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_linhn_MY_PROJECTs_vpbank_hackathon_2025_apps_fe_app_api_follows_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/follows/route.ts */ \"(rsc)/./app/api/follows/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/follows/route\",\n        pathname: \"/api/follows\",\n        filename: \"route\",\n        bundlePath: \"app/api/follows/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\linhn\\\\MY_PROJECTs\\\\vpbank-hackathon-2025\\\\apps\\\\fe\\\\app\\\\api\\\\follows\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_linhn_MY_PROJECTs_vpbank_hackathon_2025_apps_fe_app_api_follows_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZmb2xsb3dzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZmb2xsb3dzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZm9sbG93cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNsaW5obiU1Q01ZX1BST0pFQ1RzJTVDdnBiYW5rLWhhY2thdGhvbi0yMDI1JTVDYXBwcyU1Q2ZlJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNsaW5obiU1Q01ZX1BST0pFQ1RzJTVDdnBiYW5rLWhhY2thdGhvbi0yMDI1JTVDYXBwcyU1Q2ZlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUMyQztBQUN4SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcbGluaG5cXFxcTVlfUFJPSkVDVHNcXFxcdnBiYW5rLWhhY2thdGhvbi0yMDI1XFxcXGFwcHNcXFxcZmVcXFxcYXBwXFxcXGFwaVxcXFxmb2xsb3dzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9mb2xsb3dzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZm9sbG93c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZm9sbG93cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGxpbmhuXFxcXE1ZX1BST0pFQ1RzXFxcXHZwYmFuay1oYWNrYXRob24tMjAyNVxcXFxhcHBzXFxcXGZlXFxcXGFwcFxcXFxhcGlcXFxcZm9sbG93c1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffollows%2Froute&page=%2Fapi%2Ffollows%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffollows%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ffollows%2Froute&page=%2Fapi%2Ffollows%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffollows%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();