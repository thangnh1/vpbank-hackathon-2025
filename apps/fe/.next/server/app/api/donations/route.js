/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/donations/route";
exports.ids = ["app/api/donations/route"];
exports.modules = {

/***/ "(rsc)/./app/api/donations/route.ts":
/*!************************************!*\
  !*** ./app/api/donations/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mock_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mock-db */ \"(rsc)/./lib/mock-db.ts\");\n\n\n// GET /api/donations?mine=true&campaignId=...\nasync function GET(req) {\n    const mine = req.nextUrl.searchParams.get(\"mine\") === \"true\";\n    const campaignId = req.nextUrl.searchParams.get(\"campaignId\") || undefined;\n    if (mine) {\n        const user = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getAuthUser)();\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Bạn chưa đăng nhập\"\n        }, {\n            status: 401\n        });\n        const items = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.listDonations)(user.userId);\n        const filtered = campaignId ? items.filter((d)=>d.campaignId === campaignId) : items;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            donations: filtered,\n            total: filtered.length\n        });\n    }\n    const items = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.listDonations)();\n    const filtered = campaignId ? items.filter((d)=>d.campaignId === campaignId) : items;\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        donations: filtered,\n        total: filtered.length\n    });\n}\n// POST /api/donations\n// body: { campaignId: string, amount: number, paymentMethod?: \"MOCK_QR\"|\"BANK_TRANSFER\"|\"CARD\", message?: string }\nasync function POST(req) {\n    try {\n        const user = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.getAuthUser)();\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Bạn chưa đăng nhập\"\n        }, {\n            status: 401\n        });\n        const body = await req.json().catch(()=>({}));\n        const { campaignId, amount, paymentMethod, message } = body || {};\n        if (!campaignId || typeof amount !== \"number\" || amount <= 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Thiếu campaignId hoặc số tiền không hợp lệ\"\n            }, {\n                status: 400\n            });\n        }\n        const donation = await (0,_lib_mock_db__WEBPACK_IMPORTED_MODULE_1__.createDonation)({\n            userId: user.userId,\n            campaignId: String(campaignId),\n            amount: Math.floor(amount),\n            paymentMethod: paymentMethod || \"MOCK_QR\",\n            message: message ? String(message) : undefined\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            donation\n        });\n    } catch (e) {\n        console.error(e);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Tạo khoản ủng hộ thất bại\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2RvbmF0aW9ucy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTREO0FBQ2M7QUFFMUUsOENBQThDO0FBQ3ZDLGVBQWVJLElBQUlDLEdBQWdCO0lBQ3hDLE1BQU1DLE9BQU9ELElBQUlFLE9BQU8sQ0FBQ0MsWUFBWSxDQUFDQyxHQUFHLENBQUMsWUFBWTtJQUN0RCxNQUFNQyxhQUFhTCxJQUFJRSxPQUFPLENBQUNDLFlBQVksQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQkU7SUFFakUsSUFBSUwsTUFBTTtRQUNSLE1BQU1NLE9BQU8sTUFBTVgseURBQVdBO1FBQzlCLElBQUksQ0FBQ1csTUFBTSxPQUFPWixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUIsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDbkYsTUFBTUMsUUFBUSxNQUFNZCwyREFBYUEsQ0FBQ1UsS0FBS0ssTUFBTTtRQUM3QyxNQUFNQyxXQUFXUixhQUFhTSxNQUFNRyxNQUFNLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRVYsVUFBVSxLQUFLQSxjQUFjTTtRQUNqRixPQUFPaEIscURBQVlBLENBQUNhLElBQUksQ0FBQztZQUFFUSxXQUFXSDtZQUFVSSxPQUFPSixTQUFTSyxNQUFNO1FBQUM7SUFDekU7SUFFQSxNQUFNUCxRQUFRLE1BQU1kLDJEQUFhQTtJQUNqQyxNQUFNZ0IsV0FBV1IsYUFBYU0sTUFBTUcsTUFBTSxDQUFDLENBQUNDLElBQU1BLEVBQUVWLFVBQVUsS0FBS0EsY0FBY007SUFDakYsT0FBT2hCLHFEQUFZQSxDQUFDYSxJQUFJLENBQUM7UUFBRVEsV0FBV0g7UUFBVUksT0FBT0osU0FBU0ssTUFBTTtJQUFDO0FBQ3pFO0FBRUEsc0JBQXNCO0FBQ3RCLG1IQUFtSDtBQUM1RyxlQUFlQyxLQUFLbkIsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1PLE9BQU8sTUFBTVgseURBQVdBO1FBQzlCLElBQUksQ0FBQ1csTUFBTSxPQUFPWixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUIsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFFbkYsTUFBTVUsT0FBTyxNQUFNcEIsSUFBSVEsSUFBSSxHQUFHYSxLQUFLLENBQUMsSUFBTyxFQUFDO1FBQzVDLE1BQU0sRUFBRWhCLFVBQVUsRUFBRWlCLE1BQU0sRUFBRUMsYUFBYSxFQUFFQyxPQUFPLEVBQUUsR0FBR0osUUFBUSxDQUFDO1FBRWhFLElBQUksQ0FBQ2YsY0FBYyxPQUFPaUIsV0FBVyxZQUFZQSxVQUFVLEdBQUc7WUFDNUQsT0FBTzNCLHFEQUFZQSxDQUFDYSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBNkMsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ2xHO1FBRUEsTUFBTWUsV0FBVyxNQUFNM0IsNERBQWNBLENBQUM7WUFDcENjLFFBQVFMLEtBQUtLLE1BQU07WUFDbkJQLFlBQVlxQixPQUFPckI7WUFDbkJpQixRQUFRSyxLQUFLQyxLQUFLLENBQUNOO1lBQ25CQyxlQUFnQkEsaUJBQWlCO1lBQ2pDQyxTQUFTQSxVQUFVRSxPQUFPRixXQUFXbEI7UUFDdkM7UUFFQSxPQUFPWCxxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUVxQixTQUFTO1lBQU1KO1FBQVM7SUFDckQsRUFBRSxPQUFPSyxHQUFHO1FBQ1ZDLFFBQVF0QixLQUFLLENBQUNxQjtRQUNkLE9BQU9uQyxxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBNEIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDakY7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxsaW5oblxcTVlfUFJPSkVDVHNcXHZwYmFuay1oYWNrYXRob24tMjAyNVxcYXBwc1xcZmVcXGFwcFxcYXBpXFxkb25hdGlvbnNcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBnZXRBdXRoVXNlciwgbGlzdERvbmF0aW9ucywgY3JlYXRlRG9uYXRpb24gfSBmcm9tIFwiQC9saWIvbW9jay1kYlwiXG5cbi8vIEdFVCAvYXBpL2RvbmF0aW9ucz9taW5lPXRydWUmY2FtcGFpZ25JZD0uLi5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBtaW5lID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldChcIm1pbmVcIikgPT09IFwidHJ1ZVwiXG4gIGNvbnN0IGNhbXBhaWduSWQgPSByZXEubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiY2FtcGFpZ25JZFwiKSB8fCB1bmRlZmluZWRcblxuICBpZiAobWluZSkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRBdXRoVXNlcigpXG4gICAgaWYgKCF1c2VyKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJC4bqhbiBjaMawYSDEkcSDbmcgbmjhuq1wXCIgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgbGlzdERvbmF0aW9ucyh1c2VyLnVzZXJJZClcbiAgICBjb25zdCBmaWx0ZXJlZCA9IGNhbXBhaWduSWQgPyBpdGVtcy5maWx0ZXIoKGQpID0+IGQuY2FtcGFpZ25JZCA9PT0gY2FtcGFpZ25JZCkgOiBpdGVtc1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGRvbmF0aW9uczogZmlsdGVyZWQsIHRvdGFsOiBmaWx0ZXJlZC5sZW5ndGggfSlcbiAgfVxuXG4gIGNvbnN0IGl0ZW1zID0gYXdhaXQgbGlzdERvbmF0aW9ucygpXG4gIGNvbnN0IGZpbHRlcmVkID0gY2FtcGFpZ25JZCA/IGl0ZW1zLmZpbHRlcigoZCkgPT4gZC5jYW1wYWlnbklkID09PSBjYW1wYWlnbklkKSA6IGl0ZW1zXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGRvbmF0aW9uczogZmlsdGVyZWQsIHRvdGFsOiBmaWx0ZXJlZC5sZW5ndGggfSlcbn1cblxuLy8gUE9TVCAvYXBpL2RvbmF0aW9uc1xuLy8gYm9keTogeyBjYW1wYWlnbklkOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyLCBwYXltZW50TWV0aG9kPzogXCJNT0NLX1FSXCJ8XCJCQU5LX1RSQU5TRkVSXCJ8XCJDQVJEXCIsIG1lc3NhZ2U/OiBzdHJpbmcgfVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRBdXRoVXNlcigpXG4gICAgaWYgKCF1c2VyKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJC4bqhbiBjaMawYSDEkcSDbmcgbmjhuq1wXCIgfSwgeyBzdGF0dXM6IDQwMSB9KVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9IGFzIGFueSkpXG4gICAgY29uc3QgeyBjYW1wYWlnbklkLCBhbW91bnQsIHBheW1lbnRNZXRob2QsIG1lc3NhZ2UgfSA9IGJvZHkgfHwge31cblxuICAgIGlmICghY2FtcGFpZ25JZCB8fCB0eXBlb2YgYW1vdW50ICE9PSBcIm51bWJlclwiIHx8IGFtb3VudCA8PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJUaGnhur91IGNhbXBhaWduSWQgaG/hurdjIHPhu5EgdGnhu4FuIGtow7RuZyBo4bujcCBs4buHXCIgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGNvbnN0IGRvbmF0aW9uID0gYXdhaXQgY3JlYXRlRG9uYXRpb24oe1xuICAgICAgdXNlcklkOiB1c2VyLnVzZXJJZCxcbiAgICAgIGNhbXBhaWduSWQ6IFN0cmluZyhjYW1wYWlnbklkKSxcbiAgICAgIGFtb3VudDogTWF0aC5mbG9vcihhbW91bnQpLFxuICAgICAgcGF5bWVudE1ldGhvZDogKHBheW1lbnRNZXRob2QgfHwgXCJNT0NLX1FSXCIpLFxuICAgICAgbWVzc2FnZTogbWVzc2FnZSA/IFN0cmluZyhtZXNzYWdlKSA6IHVuZGVmaW5lZCxcbiAgICB9KVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZG9uYXRpb24gfSlcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJU4bqhbyBraG/huqNuIOG7p25nIGjhu5kgdGjhuqV0IGLhuqFpXCIgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0QXV0aFVzZXIiLCJsaXN0RG9uYXRpb25zIiwiY3JlYXRlRG9uYXRpb24iLCJHRVQiLCJyZXEiLCJtaW5lIiwibmV4dFVybCIsInNlYXJjaFBhcmFtcyIsImdldCIsImNhbXBhaWduSWQiLCJ1bmRlZmluZWQiLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiaXRlbXMiLCJ1c2VySWQiLCJmaWx0ZXJlZCIsImZpbHRlciIsImQiLCJkb25hdGlvbnMiLCJ0b3RhbCIsImxlbmd0aCIsIlBPU1QiLCJib2R5IiwiY2F0Y2giLCJhbW91bnQiLCJwYXltZW50TWV0aG9kIiwibWVzc2FnZSIsImRvbmF0aW9uIiwiU3RyaW5nIiwiTWF0aCIsImZsb29yIiwic3VjY2VzcyIsImUiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/donations/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mock-db.ts":
/*!************************!*\
  !*** ./lib/mock-db.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   approveCampaignRequest: () => (/* binding */ approveCampaignRequest),\n/* harmony export */   createDonation: () => (/* binding */ createDonation),\n/* harmony export */   followCampaign: () => (/* binding */ followCampaign),\n/* harmony export */   getAuthUser: () => (/* binding */ getAuthUser),\n/* harmony export */   getCampaignById: () => (/* binding */ getCampaignById),\n/* harmony export */   getFollowingDetails: () => (/* binding */ getFollowingDetails),\n/* harmony export */   listCampaignRequests: () => (/* binding */ listCampaignRequests),\n/* harmony export */   listCampaigns: () => (/* binding */ listCampaigns),\n/* harmony export */   listDonations: () => (/* binding */ listDonations),\n/* harmony export */   listNotifications: () => (/* binding */ listNotifications),\n/* harmony export */   notify: () => (/* binding */ notify),\n/* harmony export */   rejectCampaignRequest: () => (/* binding */ rejectCampaignRequest),\n/* harmony export */   requestNewCampaign: () => (/* binding */ requestNewCampaign),\n/* harmony export */   unfollowCampaign: () => (/* binding */ unfollowCampaign),\n/* harmony export */   upsertCampaign: () => (/* binding */ upsertCampaign)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_3__);\n// lib/mock-db.ts\n\n\n\n\n\nconst SECRET = new TextEncoder().encode(process.env.JWT_SECRET || \"dev-secret-key-change-in-production\");\nconst DB_PATH = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"db.json\");\n// ==== Ensure DB & initial seed ====\nasync function ensureDb() {\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().access(DB_PATH);\n    } catch  {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().mkdir(path__WEBPACK_IMPORTED_MODULE_2___default().dirname(DB_PATH), {\n            recursive: true\n        });\n        const now = new Date().toISOString();\n        const seed = {\n            users: [\n                {\n                    userId: \"u_donor\",\n                    email: \"donor@demo.dev\",\n                    role: \"DONOR\",\n                    name: \"Nhà hảo tâm Demo\"\n                },\n                {\n                    userId: \"u_org\",\n                    email: \"org@demo.dev\",\n                    role: \"ORG_ADMIN\",\n                    name: \"Tổ chức Demo\"\n                },\n                {\n                    userId: \"u_auditor\",\n                    email: \"auditor@demo.dev\",\n                    role: \"AUDITOR\",\n                    name: \"Kiểm toán Demo\"\n                },\n                {\n                    userId: \"u_admin\",\n                    email: \"admin@demo.dev\",\n                    role: \"SUPERADMIN\",\n                    name: \"Quản trị Demo\"\n                }\n            ],\n            campaigns: [\n                {\n                    id: \"c_mien-trung-lu-lut\",\n                    title: \"Cứu trợ khẩn cấp miền Trung mùa lũ\",\n                    slug: \"cuu-tro-mien-trung\",\n                    summary: \"Hỗ trợ nhu yếu phẩm, máy lọc nước và di dời an toàn cho các hộ dân bị ảnh hưởng do mưa lũ tại miền Trung.\",\n                    goal: 500000000,\n                    raised: 120000000,\n                    status: \"ACTIVE\",\n                    ownerId: \"u_org\",\n                    tags: [\n                        \"cứu trợ\",\n                        \"thiên tai\",\n                        \"khẩn cấp\"\n                    ],\n                    createdAt: now,\n                    updatedAt: now\n                },\n                {\n                    id: \"c-sua-truong-vung-cao\",\n                    title: \"Sửa lớp học tạm vùng cao\",\n                    slug: \"sua-lop-hoc-vung-cao\",\n                    summary: \"Tu sửa phòng học, bổ sung bàn ghế và vật dụng mùa đông cho học sinh tại điểm trường vùng cao.\",\n                    goal: 300000000,\n                    raised: 40000000,\n                    status: \"ACTIVE\",\n                    ownerId: \"u_org\",\n                    tags: [\n                        \"giáo dục\",\n                        \"trẻ em\",\n                        \"cơ sở vật chất\"\n                    ],\n                    createdAt: now,\n                    updatedAt: now\n                }\n            ],\n            campaignRequests: [],\n            notifications: [],\n            follows: [],\n            activities: [],\n            donations: []\n        };\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().writeFile(DB_PATH, JSON.stringify(seed, null, 2), \"utf8\");\n    }\n}\nfunction ensureArray(v) {\n    return Array.isArray(v) ? v : [];\n}\nasync function migrateDbObject(obj) {\n    let changed = false;\n    const db = {\n        ...obj\n    };\n    // đảm bảo các bảng luôn tồn tại dạng mảng\n    const keys = [\n        \"users\",\n        \"campaigns\",\n        \"campaignRequests\",\n        \"notifications\",\n        \"follows\",\n        \"activities\",\n        \"donations\"\n    ];\n    for (const k of keys){\n        if (!Array.isArray(db[k])) {\n            db[k] = [];\n            changed = true;\n        }\n    }\n    // vệ sinh tối thiểu từng collection (optional, đề phòng null)\n    db.campaigns = ensureArray(db.campaigns);\n    db.campaignRequests = ensureArray(db.campaignRequests);\n    db.notifications = ensureArray(db.notifications);\n    db.follows = ensureArray(db.follows);\n    db.activities = ensureArray(db.activities);\n    db.donations = ensureArray(db.donations);\n    return {\n        db,\n        changed\n    };\n}\nasync function readDb() {\n    await ensureDb();\n    const raw = await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().readFile(DB_PATH, \"utf8\");\n    const parsed = JSON.parse(raw);\n    const { db, changed } = await migrateDbObject(parsed);\n    if (changed) {\n        // nếu schema cũ thiếu field → ghi lại file để lần sau khỏi migrate nữa\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().writeFile(DB_PATH, JSON.stringify(db, null, 2), \"utf8\");\n    }\n    return db;\n}\nasync function writeDb(next) {\n    const tmp = DB_PATH + \".tmp\";\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().writeFile(tmp, JSON.stringify(next, null, 2), \"utf8\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3___default().rename(tmp, DB_PATH);\n}\n// ==== Auth helper (read JWT from cookie & verify) ====\nasync function getAuthUser() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const token = cookieStore.get(\"session\")?.value;\n    if (!token) return null;\n    try {\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtVerify)(token, SECRET);\n        return payload;\n    } catch  {\n        return null;\n    }\n}\n// ==== Campaign helpers ====\nasync function listCampaigns() {\n    const db = await readDb();\n    return db.campaigns;\n}\nasync function getCampaignById(id) {\n    const db = await readDb();\n    return db.campaigns.find((c)=>c.id === id) || null;\n}\nasync function upsertCampaign(input) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const slug = input.slug || input.title.toLowerCase().normalize(\"NFKD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)+/g, \"\");\n    if (input.id) {\n        const idx = db.campaigns.findIndex((c)=>c.id === input.id);\n        if (idx >= 0) {\n            db.campaigns[idx] = {\n                ...db.campaigns[idx],\n                ...input,\n                slug,\n                updatedAt: now\n            };\n        } else {\n            db.campaigns.push({\n                id: input.id,\n                title: input.title,\n                slug,\n                summary: input.summary || \"\",\n                goal: input.goal ?? 0,\n                raised: input.raised ?? 0,\n                status: input.status || \"DRAFT\",\n                ownerId: input.ownerId,\n                tags: input.tags || [],\n                createdAt: now,\n                updatedAt: now\n            });\n        }\n    } else {\n        db.campaigns.push({\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n            title: input.title,\n            slug,\n            summary: input.summary || \"\",\n            goal: input.goal ?? 0,\n            raised: input.raised ?? 0,\n            status: input.status || \"DRAFT\",\n            ownerId: input.ownerId,\n            tags: input.tags || [],\n            createdAt: now,\n            updatedAt: now\n        });\n    }\n    await writeDb(db);\n    return db.campaigns.find((c)=>c.slug === slug);\n}\n// ==== Campaign request (approve/reject + notify) ====\nasync function requestNewCampaign(params) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const req = {\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        title: params.title,\n        details: params.details,\n        requestedBy: params.requestedBy,\n        status: \"PENDING\",\n        createdAt: now,\n        updatedAt: now\n    };\n    db.campaignRequests.push(req);\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"CAMPAIGN_REQUESTED\",\n        actorId: params.requestedBy,\n        targetType: \"REQUEST\",\n        targetId: req.id,\n        meta: {\n            title: req.title\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return req;\n}\nasync function approveCampaignRequest(reqId, actorId, reason) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const req = db.campaignRequests.find((r)=>r.id === reqId);\n    if (!req) throw new Error(\"Không tìm thấy yêu cầu chiến dịch\");\n    req.status = \"APPROVED\";\n    req.reason = reason;\n    req.updatedAt = now;\n    // Notify requester\n    db.notifications.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        userId: req.requestedBy,\n        type: \"APPROVAL\",\n        title: \"Yêu cầu chiến dịch đã được duyệt\",\n        message: `Chiến dịch “${req.title}” đã được duyệt. ${reason ? \"Ghi chú: \" + reason : \"\"}`,\n        read: false,\n        createdAt: now\n    });\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"CAMPAIGN_APPROVED\",\n        actorId: actorId,\n        targetType: \"REQUEST\",\n        targetId: reqId,\n        meta: {\n            reason\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return req;\n}\nasync function rejectCampaignRequest(reqId, actorId, reason) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const req = db.campaignRequests.find((r)=>r.id === reqId);\n    if (!req) throw new Error(\"Không tìm thấy yêu cầu chiến dịch\");\n    req.status = \"REJECTED\";\n    req.reason = reason;\n    req.updatedAt = now;\n    // Notify requester\n    db.notifications.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        userId: req.requestedBy,\n        type: \"APPROVAL\",\n        title: \"Yêu cầu chiến dịch bị từ chối\",\n        message: `Chiến dịch “${req.title}” bị từ chối. Lý do: ${reason}`,\n        read: false,\n        createdAt: now\n    });\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"CAMPAIGN_REJECTED\",\n        actorId: actorId,\n        targetType: \"REQUEST\",\n        targetId: reqId,\n        meta: {\n            reason\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return req;\n}\n// ==== Notifications ====\nasync function listNotifications(userId) {\n    const db = await readDb();\n    return db.notifications.filter((n)=>n.userId === userId).sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n}\nasync function notify(userId, payload) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const n = {\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        userId,\n        read: false,\n        createdAt: now,\n        ...payload\n    };\n    db.notifications.push(n);\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"SYSTEM\",\n        actorId: userId,\n        targetType: \"NOTIFICATION\",\n        targetId: n.id,\n        meta: {\n            title: n.title\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return n;\n}\n// ==== Follow ====\nasync function followCampaign(userId, campaignId) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    if (!db.follows.find((f)=>f.userId === userId && f.campaignId === campaignId)) {\n        db.follows.push({\n            userId,\n            campaignId,\n            createdAt: now\n        });\n        db.activities.push({\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n            type: \"FOLLOWED\",\n            actorId: userId,\n            targetType: \"CAMPAIGN\",\n            targetId: campaignId,\n            createdAt: now\n        });\n        await writeDb(db);\n    }\n    return {\n        ok: true\n    };\n}\nasync function unfollowCampaign(userId, campaignId) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const next = db.follows.filter((f)=>!(f.userId === userId && f.campaignId === campaignId));\n    if (next.length !== db.follows.length) {\n        db.follows = next;\n        db.activities.push({\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n            type: \"UNFOLLOWED\",\n            actorId: userId,\n            targetType: \"CAMPAIGN\",\n            targetId: campaignId,\n            createdAt: now\n        });\n        await writeDb(db);\n    }\n    return {\n        ok: true\n    };\n}\nasync function getFollowingDetails(userId) {\n    const db = await readDb();\n    const followIds = db.follows.filter((f)=>f.userId === userId).map((f)=>f.campaignId);\n    const campaigns = db.campaigns.filter((c)=>followIds.includes(c.id));\n    const latestActivities = db.activities.filter((a)=>a.targetType === \"CAMPAIGN\" && a.targetId && followIds.includes(a.targetId)).sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1).slice(0, 50);\n    return {\n        campaigns,\n        latestActivities\n    };\n}\n// ==== Campaign requests list (role-aware) ====\nasync function listCampaignRequests(forUserId, role) {\n    const db = await (async ()=>{\n        // dùng readDb() nội bộ\n        const raw = await (await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs/promises */ \"fs/promises\", 23))).readFile((await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23))).join(process.cwd(), \"data\", \"db.json\"), \"utf8\");\n        return JSON.parse(raw);\n    })();\n    // Chưa đăng nhập thì không trả gì\n    if (!forUserId) return [];\n    // Admin / Auditor / Org Admin → xem tất cả\n    if (role === \"SUPERADMIN\" || role === \"AUDITOR\" || role === \"ORG_ADMIN\") {\n        return db.campaignRequests.sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n    }\n    // Donor / user thường → chỉ xem request của mình\n    return db.campaignRequests.filter((r)=>r.requestedBy === forUserId).sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n}\n// ==== Donations ====\nasync function listDonations(userId) {\n    const db = await readDb();\n    const arr = userId ? db.donations.filter((d)=>d.userId === userId) : db.donations;\n    // sort newest first\n    return arr.sort((a, b)=>a.createdAt < b.createdAt ? 1 : -1);\n}\nasync function createDonation(params) {\n    const db = await readDb();\n    const now = new Date().toISOString();\n    const campaign = db.campaigns.find((c)=>c.id === params.campaignId);\n    if (!campaign) throw new Error(\"Không tìm thấy chiến dịch\");\n    const donation = {\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        campaignId: params.campaignId,\n        userId: params.userId,\n        amount: Math.max(0, Math.floor(params.amount || 0)),\n        status: \"ESCROWED\",\n        txId: `TXN-${Math.random().toString(36).slice(2, 10).toUpperCase()}`,\n        paymentMethod: params.paymentMethod || \"MOCK_QR\",\n        message: params.message,\n        createdAt: now\n    };\n    db.donations.push(donation);\n    // (Demo) Update campaign\n    campaign.raised = Math.max(0, (campaign.raised || 0) + donation.amount);\n    campaign.updatedAt = now;\n    // Activity\n    db.activities.push({\n        id: (0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)(),\n        type: \"DONATION_CREATED\",\n        actorId: params.userId,\n        targetType: \"CAMPAIGN\",\n        targetId: params.campaignId,\n        meta: {\n            amount: donation.amount,\n            txId: donation.txId\n        },\n        createdAt: now\n    });\n    await writeDb(db);\n    return donation;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSTtRQUFDO1FBQ3JEaEcsV0FBV25CO0lBQ2I7SUFFQSxNQUFNNEMsUUFBUVI7SUFDZCxPQUFPMEU7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxsaW5oblxcTVlfUFJPSkVDVHNcXHZwYmFuay1oYWNrYXRob24tMjAyNVxcYXBwc1xcZmVcXGxpYlxcbW9jay1kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvbW9jay1kYi50c1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiXHJcbmltcG9ydCB7IGp3dFZlcmlmeSwgSldUUGF5bG9hZCB9IGZyb20gXCJqb3NlXCJcclxuaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIlxyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiXHJcbmltcG9ydCBmcyBmcm9tIFwiZnMvcHJvbWlzZXNcIlxyXG5cclxuY29uc3QgU0VDUkVUID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJkZXYtc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvblwiKVxyXG5jb25zdCBEQl9QQVRIID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiZGF0YVwiLCBcImRiLmpzb25cIilcclxuXHJcbi8vID09PT0gVHlwZXMgPT09PVxyXG5leHBvcnQgdHlwZSBVc2VyUm9sZSA9IFwiRE9OT1JcIiB8IFwiT1JHX0FETUlOXCIgfCBcIkFVRElUT1JcIiB8IFwiU1VQRVJBRE1JTlwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25QYXlsb2FkIGV4dGVuZHMgSldUUGF5bG9hZCB7XHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICBlbWFpbDogc3RyaW5nXHJcbiAgcm9sZTogVXNlclJvbGVcclxuICBpc0Fub255bW91cz86IGJvb2xlYW5cclxuICBhbm9uSWQ/OiBzdHJpbmdcclxuICBuYW1lPzogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FtcGFpZ24ge1xyXG4gIGlkOiBzdHJpbmdcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgc2x1Zzogc3RyaW5nXHJcbiAgc3VtbWFyeTogc3RyaW5nXHJcbiAgZ29hbDogbnVtYmVyXHJcbiAgcmFpc2VkOiBudW1iZXJcclxuICBzdGF0dXM6IFwiRFJBRlRcIiB8IFwiQUNUSVZFXCIgfCBcIlBBVVNFRFwiIHwgXCJDT01QTEVURURcIlxyXG4gIG93bmVySWQ6IHN0cmluZ1xyXG4gIHRhZ3M6IHN0cmluZ1tdXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxuICB1cGRhdGVkQXQ6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhbXBhaWduUmVxdWVzdCB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICBkZXRhaWxzOiBzdHJpbmdcclxuICByZXF1ZXN0ZWRCeTogc3RyaW5nXHJcbiAgc3RhdHVzOiBcIlBFTkRJTkdcIiB8IFwiQVBQUk9WRURcIiB8IFwiUkVKRUNURURcIlxyXG4gIHJlYXNvbj86IHN0cmluZ1xyXG4gIGNyZWF0ZWRBdDogc3RyaW5nXHJcbiAgdXBkYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBOb3RpZmljYXRpb24ge1xyXG4gIGlkOiBzdHJpbmdcclxuICB1c2VySWQ6IHN0cmluZ1xyXG4gIHR5cGU6IFwiU1lTVEVNXCIgfCBcIkNBTVBBSUdOXCIgfCBcIkFQUFJPVkFMXCJcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgbWVzc2FnZTogc3RyaW5nXHJcbiAgbWV0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuICByZWFkOiBib29sZWFuXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGb2xsb3cge1xyXG4gIHVzZXJJZDogc3RyaW5nXHJcbiAgY2FtcGFpZ25JZDogc3RyaW5nXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpdml0eSB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIHR5cGU6XHJcbiAgICB8IFwiRE9OQVRJT05fQ1JFQVRFRFwiXHJcbiAgICB8IFwiQ0FNUEFJR05fUkVRVUVTVEVEXCJcclxuICAgIHwgXCJDQU1QQUlHTl9BUFBST1ZFRFwiXHJcbiAgICB8IFwiQ0FNUEFJR05fUkVKRUNURURcIlxyXG4gICAgfCBcIkZPTExPV0VEXCJcclxuICAgIHwgXCJVTkZPTExPV0VEXCJcclxuICAgIHwgXCJTWVNURU1cIlxyXG4gIGFjdG9ySWQ6IHN0cmluZ1xyXG4gIHRhcmdldFR5cGU6IFwiQ0FNUEFJR05cIiB8IFwiUkVRVUVTVFwiIHwgXCJOT1RJRklDQVRJT05cIiB8IFwiU1lTVEVNXCJcclxuICB0YXJnZXRJZD86IHN0cmluZ1xyXG4gIG1ldGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgRG9uYXRpb25TdGF0dXMgPSBcIlBMRURHRURcIiB8IFwiRVNDUk9XRURcIiB8IFwiU0VUVExFRFwiIHwgXCJSRUZVTkRFRFwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERvbmF0aW9uIHtcclxuICBpZDogc3RyaW5nXHJcbiAgY2FtcGFpZ25JZDogc3RyaW5nXHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICBhbW91bnQ6IG51bWJlclxyXG4gIHN0YXR1czogRG9uYXRpb25TdGF0dXNcclxuICB0eElkOiBzdHJpbmdcclxuICBwYXltZW50TWV0aG9kOiBcIk1PQ0tfUVJcIiB8IFwiQkFOS19UUkFOU0ZFUlwiIHwgXCJDQVJEXCJcclxuICBtZXNzYWdlPzogc3RyaW5nXHJcbiAgY3JlYXRlZEF0OiBzdHJpbmdcclxuICBvbmNoYWluQXQ/OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEQlNoYXBlIHtcclxuICB1c2VyczogQXJyYXk8eyB1c2VySWQ6IHN0cmluZzsgZW1haWw6IHN0cmluZzsgcm9sZTogVXNlclJvbGU7IG5hbWU/OiBzdHJpbmcgfT5cclxuICBjYW1wYWlnbnM6IENhbXBhaWduW11cclxuICBjYW1wYWlnblJlcXVlc3RzOiBDYW1wYWlnblJlcXVlc3RbXVxyXG4gIG5vdGlmaWNhdGlvbnM6IE5vdGlmaWNhdGlvbltdXHJcbiAgZm9sbG93czogRm9sbG93W11cclxuICBhY3Rpdml0aWVzOiBBY3Rpdml0eVtdXHJcbiAgZG9uYXRpb25zOiBEb25hdGlvbltdXHJcbn1cclxuXHJcbi8vID09PT0gRW5zdXJlIERCICYgaW5pdGlhbCBzZWVkID09PT1cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRGIoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGZzLmFjY2VzcyhEQl9QQVRIKVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgYXdhaXQgZnMubWtkaXIocGF0aC5kaXJuYW1lKERCX1BBVEgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcblxyXG4gICAgY29uc3Qgc2VlZDogREJTaGFwZSA9IHtcclxuICAgICAgdXNlcnM6IFtcclxuICAgICAgICB7IHVzZXJJZDogXCJ1X2Rvbm9yXCIsIGVtYWlsOiBcImRvbm9yQGRlbW8uZGV2XCIsIHJvbGU6IFwiRE9OT1JcIiwgbmFtZTogXCJOaMOgIGjhuqNvIHTDom0gRGVtb1wiIH0sXHJcbiAgICAgICAgeyB1c2VySWQ6IFwidV9vcmdcIiwgZW1haWw6IFwib3JnQGRlbW8uZGV2XCIsIHJvbGU6IFwiT1JHX0FETUlOXCIsIG5hbWU6IFwiVOG7lSBjaOG7qWMgRGVtb1wiIH0sXHJcbiAgICAgICAgeyB1c2VySWQ6IFwidV9hdWRpdG9yXCIsIGVtYWlsOiBcImF1ZGl0b3JAZGVtby5kZXZcIiwgcm9sZTogXCJBVURJVE9SXCIsIG5hbWU6IFwiS2nhu4NtIHRvw6FuIERlbW9cIiB9LFxyXG4gICAgICAgIHsgdXNlcklkOiBcInVfYWRtaW5cIiwgZW1haWw6IFwiYWRtaW5AZGVtby5kZXZcIiwgcm9sZTogXCJTVVBFUkFETUlOXCIsIG5hbWU6IFwiUXXhuqNuIHRy4buLIERlbW9cIiB9LFxyXG4gICAgICBdLFxyXG4gICAgICBjYW1wYWlnbnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCJjX21pZW4tdHJ1bmctbHUtbHV0XCIsXHJcbiAgICAgICAgICB0aXRsZTogXCJD4bupdSB0cuG7oyBraOG6qW4gY+G6pXAgbWnhu4FuIFRydW5nIG3DuWEgbMWpXCIsXHJcbiAgICAgICAgICBzbHVnOiBcImN1dS10cm8tbWllbi10cnVuZ1wiLFxyXG4gICAgICAgICAgc3VtbWFyeTpcclxuICAgICAgICAgICAgXCJI4buXIHRy4bujIG5odSB54bq/dSBwaOG6qW0sIG3DoXkgbOG7jWMgbsaw4bubYyB2w6AgZGkgZOG7nWkgYW4gdG/DoG4gY2hvIGPDoWMgaOG7mSBkw6JuIGLhu4sg4bqjbmggaMaw4bufbmcgZG8gbcawYSBsxakgdOG6oWkgbWnhu4FuIFRydW5nLlwiLFxyXG4gICAgICAgICAgZ29hbDogNTAwXzAwMF8wMDAsXHJcbiAgICAgICAgICByYWlzZWQ6IDEyMF8wMDBfMDAwLFxyXG4gICAgICAgICAgc3RhdHVzOiBcIkFDVElWRVwiLFxyXG4gICAgICAgICAgb3duZXJJZDogXCJ1X29yZ1wiLFxyXG4gICAgICAgICAgdGFnczogW1wiY+G7qXUgdHLhu6NcIiwgXCJ0aGnDqm4gdGFpXCIsIFwia2jhuqluIGPhuqVwXCJdLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBub3csXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiBcImMtc3VhLXRydW9uZy12dW5nLWNhb1wiLFxyXG4gICAgICAgICAgdGl0bGU6IFwiU+G7rWEgbOG7m3AgaOG7jWMgdOG6oW0gdsO5bmcgY2FvXCIsXHJcbiAgICAgICAgICBzbHVnOiBcInN1YS1sb3AtaG9jLXZ1bmctY2FvXCIsXHJcbiAgICAgICAgICBzdW1tYXJ5OlxyXG4gICAgICAgICAgICBcIlR1IHPhu61hIHBow7JuZyBo4buNYywgYuG7lSBzdW5nIGLDoG4gZ2jhur8gdsOgIHbhuq10IGThu6VuZyBtw7lhIMSRw7RuZyBjaG8gaOG7jWMgc2luaCB04bqhaSDEkWnhu4NtIHRyxrDhu51uZyB2w7luZyBjYW8uXCIsXHJcbiAgICAgICAgICBnb2FsOiAzMDBfMDAwXzAwMCxcclxuICAgICAgICAgIHJhaXNlZDogNDBfMDAwXzAwMCxcclxuICAgICAgICAgIHN0YXR1czogXCJBQ1RJVkVcIixcclxuICAgICAgICAgIG93bmVySWQ6IFwidV9vcmdcIixcclxuICAgICAgICAgIHRhZ3M6IFtcImdpw6FvIGThu6VjXCIsIFwidHLhursgZW1cIiwgXCJjxqEgc+G7nyB24bqtdCBjaOG6pXRcIl0sXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbm93LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIGNhbXBhaWduUmVxdWVzdHM6IFtdLFxyXG4gICAgICBub3RpZmljYXRpb25zOiBbXSxcclxuICAgICAgZm9sbG93czogW10sXHJcbiAgICAgIGFjdGl2aXRpZXM6IFtdLFxyXG4gICAgICBkb25hdGlvbnM6IFtdLFxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShEQl9QQVRILCBKU09OLnN0cmluZ2lmeShzZWVkLCBudWxsLCAyKSwgXCJ1dGY4XCIpXHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGVuc3VyZUFycmF5PFQgPSBhbnk+KHY6IGFueSk6IFRbXSB7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodikgPyB2IDogW11cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbWlncmF0ZURiT2JqZWN0KG9iajogYW55KTogUHJvbWlzZTx7IGRiOiBhbnk7IGNoYW5nZWQ6IGJvb2xlYW4gfT4ge1xyXG4gIGxldCBjaGFuZ2VkID0gZmFsc2VcclxuICBjb25zdCBkYiA9IHsgLi4ub2JqIH1cclxuXHJcbiAgLy8gxJHhuqNtIGLhuqNvIGPDoWMgYuG6o25nIGx1w7RuIHThu5NuIHThuqFpIGThuqFuZyBt4bqjbmdcclxuICBjb25zdCBrZXlzID0gW1xyXG4gICAgXCJ1c2Vyc1wiLFxyXG4gICAgXCJjYW1wYWlnbnNcIixcclxuICAgIFwiY2FtcGFpZ25SZXF1ZXN0c1wiLFxyXG4gICAgXCJub3RpZmljYXRpb25zXCIsXHJcbiAgICBcImZvbGxvd3NcIixcclxuICAgIFwiYWN0aXZpdGllc1wiLFxyXG4gICAgXCJkb25hdGlvbnNcIiwgLy8gbeG7m2kgdGjDqm1cclxuICBdXHJcbiAgZm9yIChjb25zdCBrIG9mIGtleXMpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShkYltrXSkpIHtcclxuICAgICAgZGJba10gPSBbXVxyXG4gICAgICBjaGFuZ2VkID0gdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gduG7hyBzaW5oIHThu5FpIHRoaeG7g3UgdOG7q25nIGNvbGxlY3Rpb24gKG9wdGlvbmFsLCDEkeG7gSBwaMOybmcgbnVsbClcclxuICBkYi5jYW1wYWlnbnMgPSBlbnN1cmVBcnJheShkYi5jYW1wYWlnbnMpXHJcbiAgZGIuY2FtcGFpZ25SZXF1ZXN0cyA9IGVuc3VyZUFycmF5KGRiLmNhbXBhaWduUmVxdWVzdHMpXHJcbiAgZGIubm90aWZpY2F0aW9ucyA9IGVuc3VyZUFycmF5KGRiLm5vdGlmaWNhdGlvbnMpXHJcbiAgZGIuZm9sbG93cyA9IGVuc3VyZUFycmF5KGRiLmZvbGxvd3MpXHJcbiAgZGIuYWN0aXZpdGllcyA9IGVuc3VyZUFycmF5KGRiLmFjdGl2aXRpZXMpXHJcbiAgZGIuZG9uYXRpb25zID0gZW5zdXJlQXJyYXkoZGIuZG9uYXRpb25zKVxyXG5cclxuICByZXR1cm4geyBkYiwgY2hhbmdlZCB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYWREYigpOiBQcm9taXNlPERCU2hhcGU+IHtcclxuICBhd2FpdCBlbnN1cmVEYigpXHJcbiAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoREJfUEFUSCwgXCJ1dGY4XCIpXHJcbiAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyYXcpXHJcblxyXG4gIGNvbnN0IHsgZGIsIGNoYW5nZWQgfSA9IGF3YWl0IG1pZ3JhdGVEYk9iamVjdChwYXJzZWQpXHJcbiAgaWYgKGNoYW5nZWQpIHtcclxuICAgIC8vIG7hur91IHNjaGVtYSBjxakgdGhp4bq/dSBmaWVsZCDihpIgZ2hpIGzhuqFpIGZpbGUgxJHhu4MgbOG6p24gc2F1IGto4buPaSBtaWdyYXRlIG7hu69hXHJcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoREJfUEFUSCwgSlNPTi5zdHJpbmdpZnkoZGIsIG51bGwsIDIpLCBcInV0ZjhcIilcclxuICB9XHJcblxyXG4gIHJldHVybiBkYiBhcyBEQlNoYXBlXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlRGIobmV4dDogREJTaGFwZSkge1xyXG4gIGNvbnN0IHRtcCA9IERCX1BBVEggKyBcIi50bXBcIlxyXG4gIGF3YWl0IGZzLndyaXRlRmlsZSh0bXAsIEpTT04uc3RyaW5naWZ5KG5leHQsIG51bGwsIDIpLCBcInV0ZjhcIilcclxuICBhd2FpdCBmcy5yZW5hbWUodG1wLCBEQl9QQVRIKVxyXG59XHJcblxyXG4vLyA9PT09IEF1dGggaGVscGVyIChyZWFkIEpXVCBmcm9tIGNvb2tpZSAmIHZlcmlmeSkgPT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXV0aFVzZXIoKTogUHJvbWlzZTxTZXNzaW9uUGF5bG9hZCB8IG51bGw+IHtcclxuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxyXG4gIGNvbnN0IHRva2VuID0gY29va2llU3RvcmUuZ2V0KFwic2Vzc2lvblwiKT8udmFsdWVcclxuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgU0VDUkVUKVxyXG4gICAgcmV0dXJuIHBheWxvYWQgYXMgU2Vzc2lvblBheWxvYWRcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09IENhbXBhaWduIGhlbHBlcnMgPT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdENhbXBhaWducygpIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgcmV0dXJuIGRiLmNhbXBhaWduc1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FtcGFpZ25CeUlkKGlkOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgcmV0dXJuIGRiLmNhbXBhaWducy5maW5kKChjKSA9PiBjLmlkID09PSBpZCkgfHwgbnVsbFxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0Q2FtcGFpZ24oaW5wdXQ6IFBhcnRpYWw8Q2FtcGFpZ24+ICYgeyB0aXRsZTogc3RyaW5nOyBvd25lcklkOiBzdHJpbmcgfSkge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICBjb25zdCBzbHVnID1cclxuICAgIGlucHV0LnNsdWcgfHxcclxuICAgIGlucHV0LnRpdGxlXHJcbiAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgIC5ub3JtYWxpemUoXCJORktEXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCBcIlwiKVxyXG4gICAgICAucmVwbGFjZSgvW15hLXowLTldKy9nLCBcIi1cIilcclxuICAgICAgLnJlcGxhY2UoLyheLXwtJCkrL2csIFwiXCIpXHJcblxyXG4gIGlmIChpbnB1dC5pZCkge1xyXG4gICAgY29uc3QgaWR4ID0gZGIuY2FtcGFpZ25zLmZpbmRJbmRleCgoYykgPT4gYy5pZCA9PT0gaW5wdXQuaWQpXHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgZGIuY2FtcGFpZ25zW2lkeF0gPSB7XHJcbiAgICAgICAgLi4uZGIuY2FtcGFpZ25zW2lkeF0sXHJcbiAgICAgICAgLi4uaW5wdXQsXHJcbiAgICAgICAgc2x1ZyxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcclxuICAgICAgfSBhcyBDYW1wYWlnblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGIuY2FtcGFpZ25zLnB1c2goe1xyXG4gICAgICAgIGlkOiBpbnB1dC5pZCxcclxuICAgICAgICB0aXRsZTogaW5wdXQudGl0bGUsXHJcbiAgICAgICAgc2x1ZyxcclxuICAgICAgICBzdW1tYXJ5OiBpbnB1dC5zdW1tYXJ5IHx8IFwiXCIsXHJcbiAgICAgICAgZ29hbDogaW5wdXQuZ29hbCA/PyAwLFxyXG4gICAgICAgIHJhaXNlZDogaW5wdXQucmFpc2VkID8/IDAsXHJcbiAgICAgICAgc3RhdHVzOiAoaW5wdXQuc3RhdHVzIGFzIGFueSkgfHwgXCJEUkFGVFwiLFxyXG4gICAgICAgIG93bmVySWQ6IGlucHV0Lm93bmVySWQsXHJcbiAgICAgICAgdGFnczogaW5wdXQudGFncyB8fCBbXSxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgZGIuY2FtcGFpZ25zLnB1c2goe1xyXG4gICAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgICB0aXRsZTogaW5wdXQudGl0bGUsXHJcbiAgICAgIHNsdWcsXHJcbiAgICAgIHN1bW1hcnk6IGlucHV0LnN1bW1hcnkgfHwgXCJcIixcclxuICAgICAgZ29hbDogaW5wdXQuZ29hbCA/PyAwLFxyXG4gICAgICByYWlzZWQ6IGlucHV0LnJhaXNlZCA/PyAwLFxyXG4gICAgICBzdGF0dXM6IChpbnB1dC5zdGF0dXMgYXMgYW55KSB8fCBcIkRSQUZUXCIsXHJcbiAgICAgIG93bmVySWQ6IGlucHV0Lm93bmVySWQsXHJcbiAgICAgIHRhZ3M6IGlucHV0LnRhZ3MgfHwgW10sXHJcbiAgICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gICAgICB1cGRhdGVkQXQ6IG5vdyxcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhd2FpdCB3cml0ZURiKGRiKVxyXG4gIHJldHVybiBkYi5jYW1wYWlnbnMuZmluZCgoYykgPT4gYy5zbHVnID09PSBzbHVnKSFcclxufVxyXG5cclxuLy8gPT09PSBDYW1wYWlnbiByZXF1ZXN0IChhcHByb3ZlL3JlamVjdCArIG5vdGlmeSkgPT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdE5ld0NhbXBhaWduKHBhcmFtczoge1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICBkZXRhaWxzOiBzdHJpbmdcclxuICByZXF1ZXN0ZWRCeTogc3RyaW5nXHJcbn0pIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgY29uc3QgcmVxOiBDYW1wYWlnblJlcXVlc3QgPSB7XHJcbiAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgdGl0bGU6IHBhcmFtcy50aXRsZSxcclxuICAgIGRldGFpbHM6IHBhcmFtcy5kZXRhaWxzLFxyXG4gICAgcmVxdWVzdGVkQnk6IHBhcmFtcy5yZXF1ZXN0ZWRCeSxcclxuICAgIHN0YXR1czogXCJQRU5ESU5HXCIsXHJcbiAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgIHVwZGF0ZWRBdDogbm93LFxyXG4gIH1cclxuICBkYi5jYW1wYWlnblJlcXVlc3RzLnB1c2gocmVxKVxyXG5cclxuICBkYi5hY3Rpdml0aWVzLnB1c2goe1xyXG4gICAgaWQ6IHJhbmRvbVVVSUQoKSxcclxuICAgIHR5cGU6IFwiQ0FNUEFJR05fUkVRVUVTVEVEXCIsXHJcbiAgICBhY3RvcklkOiBwYXJhbXMucmVxdWVzdGVkQnksXHJcbiAgICB0YXJnZXRUeXBlOiBcIlJFUVVFU1RcIixcclxuICAgIHRhcmdldElkOiByZXEuaWQsXHJcbiAgICBtZXRhOiB7IHRpdGxlOiByZXEudGl0bGUgfSxcclxuICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gIH0pXHJcblxyXG4gIGF3YWl0IHdyaXRlRGIoZGIpXHJcbiAgcmV0dXJuIHJlcVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwcm92ZUNhbXBhaWduUmVxdWVzdChyZXFJZDogc3RyaW5nLCBhY3RvcklkOiBzdHJpbmcsIHJlYXNvbj86IHN0cmluZykge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICBjb25zdCByZXEgPSBkYi5jYW1wYWlnblJlcXVlc3RzLmZpbmQoKHIpID0+IHIuaWQgPT09IHJlcUlkKVxyXG4gIGlmICghcmVxKSB0aHJvdyBuZXcgRXJyb3IoXCJLaMO0bmcgdMOsbSB0aOG6pXkgecOqdSBj4bqndSBjaGnhur9uIGThu4tjaFwiKVxyXG4gIHJlcS5zdGF0dXMgPSBcIkFQUFJPVkVEXCJcclxuICByZXEucmVhc29uID0gcmVhc29uXHJcbiAgcmVxLnVwZGF0ZWRBdCA9IG5vd1xyXG5cclxuICAvLyBOb3RpZnkgcmVxdWVzdGVyXHJcbiAgZGIubm90aWZpY2F0aW9ucy5wdXNoKHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB1c2VySWQ6IHJlcS5yZXF1ZXN0ZWRCeSxcclxuICAgIHR5cGU6IFwiQVBQUk9WQUxcIixcclxuICAgIHRpdGxlOiBcIlnDqnUgY+G6p3UgY2hp4bq/biBk4buLY2ggxJHDoyDEkcaw4bujYyBkdXnhu4d0XCIsXHJcbiAgICBtZXNzYWdlOiBgQ2hp4bq/biBk4buLY2gg4oCcJHtyZXEudGl0bGV94oCdIMSRw6MgxJHGsOG7o2MgZHV54buHdC4gJHtyZWFzb24gPyBcIkdoaSBjaMO6OiBcIiArIHJlYXNvbiA6IFwiXCJ9YCxcclxuICAgIHJlYWQ6IGZhbHNlLFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfSlcclxuXHJcbiAgZGIuYWN0aXZpdGllcy5wdXNoKHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB0eXBlOiBcIkNBTVBBSUdOX0FQUFJPVkVEXCIsXHJcbiAgICBhY3RvcklkOiBhY3RvcklkLFxyXG4gICAgdGFyZ2V0VHlwZTogXCJSRVFVRVNUXCIsXHJcbiAgICB0YXJnZXRJZDogcmVxSWQsXHJcbiAgICBtZXRhOiB7IHJlYXNvbiB9LFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfSlcclxuXHJcbiAgYXdhaXQgd3JpdGVEYihkYilcclxuICByZXR1cm4gcmVxXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWplY3RDYW1wYWlnblJlcXVlc3QocmVxSWQ6IHN0cmluZywgYWN0b3JJZDogc3RyaW5nLCByZWFzb246IHN0cmluZykge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICBjb25zdCByZXEgPSBkYi5jYW1wYWlnblJlcXVlc3RzLmZpbmQoKHIpID0+IHIuaWQgPT09IHJlcUlkKVxyXG4gIGlmICghcmVxKSB0aHJvdyBuZXcgRXJyb3IoXCJLaMO0bmcgdMOsbSB0aOG6pXkgecOqdSBj4bqndSBjaGnhur9uIGThu4tjaFwiKVxyXG4gIHJlcS5zdGF0dXMgPSBcIlJFSkVDVEVEXCJcclxuICByZXEucmVhc29uID0gcmVhc29uXHJcbiAgcmVxLnVwZGF0ZWRBdCA9IG5vd1xyXG5cclxuICAvLyBOb3RpZnkgcmVxdWVzdGVyXHJcbiAgZGIubm90aWZpY2F0aW9ucy5wdXNoKHtcclxuICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICB1c2VySWQ6IHJlcS5yZXF1ZXN0ZWRCeSxcclxuICAgIHR5cGU6IFwiQVBQUk9WQUxcIixcclxuICAgIHRpdGxlOiBcIlnDqnUgY+G6p3UgY2hp4bq/biBk4buLY2ggYuG7iyB04burIGNo4buRaVwiLFxyXG4gICAgbWVzc2FnZTogYENoaeG6v24gZOG7i2NoIOKAnCR7cmVxLnRpdGxlfeKAnSBi4buLIHThu6sgY2jhu5FpLiBMw70gZG86ICR7cmVhc29ufWAsXHJcbiAgICByZWFkOiBmYWxzZSxcclxuICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gIH0pXHJcblxyXG4gIGRiLmFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgdHlwZTogXCJDQU1QQUlHTl9SRUpFQ1RFRFwiLFxyXG4gICAgYWN0b3JJZDogYWN0b3JJZCxcclxuICAgIHRhcmdldFR5cGU6IFwiUkVRVUVTVFwiLFxyXG4gICAgdGFyZ2V0SWQ6IHJlcUlkLFxyXG4gICAgbWV0YTogeyByZWFzb24gfSxcclxuICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gIH0pXHJcblxyXG4gIGF3YWl0IHdyaXRlRGIoZGIpXHJcbiAgcmV0dXJuIHJlcVxyXG59XHJcblxyXG4vLyA9PT09IE5vdGlmaWNhdGlvbnMgPT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdE5vdGlmaWNhdGlvbnModXNlcklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgcmV0dXJuIGRiLm5vdGlmaWNhdGlvbnMuZmlsdGVyKChuKSA9PiBuLnVzZXJJZCA9PT0gdXNlcklkKS5zb3J0KChhLCBiKSA9PiAoYS5jcmVhdGVkQXQgPCBiLmNyZWF0ZWRBdCA/IDEgOiAtMSkpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBub3RpZnkoXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgcGF5bG9hZDogT21pdDxOb3RpZmljYXRpb24sIFwiaWRcIiB8IFwidXNlcklkXCIgfCBcImNyZWF0ZWRBdFwiIHwgXCJyZWFkXCI+XHJcbikge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICBjb25zdCBuOiBOb3RpZmljYXRpb24gPSB7XHJcbiAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgdXNlcklkLFxyXG4gICAgcmVhZDogZmFsc2UsXHJcbiAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgIC4uLnBheWxvYWQsXHJcbiAgfVxyXG4gIGRiLm5vdGlmaWNhdGlvbnMucHVzaChuKVxyXG4gIGRiLmFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgdHlwZTogXCJTWVNURU1cIixcclxuICAgIGFjdG9ySWQ6IHVzZXJJZCxcclxuICAgIHRhcmdldFR5cGU6IFwiTk9USUZJQ0FUSU9OXCIsXHJcbiAgICB0YXJnZXRJZDogbi5pZCxcclxuICAgIG1ldGE6IHsgdGl0bGU6IG4udGl0bGUgfSxcclxuICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gIH0pXHJcbiAgYXdhaXQgd3JpdGVEYihkYilcclxuICByZXR1cm4gblxyXG59XHJcblxyXG4vLyA9PT09IEZvbGxvdyA9PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmb2xsb3dDYW1wYWlnbih1c2VySWQ6IHN0cmluZywgY2FtcGFpZ25JZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gIGlmICghZGIuZm9sbG93cy5maW5kKChmKSA9PiBmLnVzZXJJZCA9PT0gdXNlcklkICYmIGYuY2FtcGFpZ25JZCA9PT0gY2FtcGFpZ25JZCkpIHtcclxuICAgIGRiLmZvbGxvd3MucHVzaCh7IHVzZXJJZCwgY2FtcGFpZ25JZCwgY3JlYXRlZEF0OiBub3cgfSlcclxuICAgIGRiLmFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICAgIGlkOiByYW5kb21VVUlEKCksXHJcbiAgICAgIHR5cGU6IFwiRk9MTE9XRURcIixcclxuICAgICAgYWN0b3JJZDogdXNlcklkLFxyXG4gICAgICB0YXJnZXRUeXBlOiBcIkNBTVBBSUdOXCIsXHJcbiAgICAgIHRhcmdldElkOiBjYW1wYWlnbklkLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgIH0pXHJcbiAgICBhd2FpdCB3cml0ZURiKGRiKVxyXG4gIH1cclxuICByZXR1cm4geyBvazogdHJ1ZSB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1bmZvbGxvd0NhbXBhaWduKHVzZXJJZDogc3RyaW5nLCBjYW1wYWlnbklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgY29uc3QgbmV4dCA9IGRiLmZvbGxvd3MuZmlsdGVyKChmKSA9PiAhKGYudXNlcklkID09PSB1c2VySWQgJiYgZi5jYW1wYWlnbklkID09PSBjYW1wYWlnbklkKSlcclxuICBpZiAobmV4dC5sZW5ndGggIT09IGRiLmZvbGxvd3MubGVuZ3RoKSB7XHJcbiAgICBkYi5mb2xsb3dzID0gbmV4dFxyXG4gICAgZGIuYWN0aXZpdGllcy5wdXNoKHtcclxuICAgICAgaWQ6IHJhbmRvbVVVSUQoKSxcclxuICAgICAgdHlwZTogXCJVTkZPTExPV0VEXCIsXHJcbiAgICAgIGFjdG9ySWQ6IHVzZXJJZCxcclxuICAgICAgdGFyZ2V0VHlwZTogXCJDQU1QQUlHTlwiLFxyXG4gICAgICB0YXJnZXRJZDogY2FtcGFpZ25JZCxcclxuICAgICAgY3JlYXRlZEF0OiBub3csXHJcbiAgICB9KVxyXG4gICAgYXdhaXQgd3JpdGVEYihkYilcclxuICB9XHJcbiAgcmV0dXJuIHsgb2s6IHRydWUgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Rm9sbG93aW5nRGV0YWlscyh1c2VySWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCBmb2xsb3dJZHMgPSBkYi5mb2xsb3dzLmZpbHRlcigoZikgPT4gZi51c2VySWQgPT09IHVzZXJJZCkubWFwKChmKSA9PiBmLmNhbXBhaWduSWQpXHJcbiAgY29uc3QgY2FtcGFpZ25zID0gZGIuY2FtcGFpZ25zLmZpbHRlcigoYykgPT4gZm9sbG93SWRzLmluY2x1ZGVzKGMuaWQpKVxyXG4gIGNvbnN0IGxhdGVzdEFjdGl2aXRpZXMgPSBkYi5hY3Rpdml0aWVzXHJcbiAgICAuZmlsdGVyKChhKSA9PiBhLnRhcmdldFR5cGUgPT09IFwiQ0FNUEFJR05cIiAmJiBhLnRhcmdldElkICYmIGZvbGxvd0lkcy5pbmNsdWRlcyhhLnRhcmdldElkKSlcclxuICAgIC5zb3J0KChhLCBiKSA9PiAoYS5jcmVhdGVkQXQgPCBiLmNyZWF0ZWRBdCA/IDEgOiAtMSkpXHJcbiAgICAuc2xpY2UoMCwgNTApXHJcblxyXG4gIHJldHVybiB7IGNhbXBhaWducywgbGF0ZXN0QWN0aXZpdGllcyB9XHJcbn1cclxuLy8gPT09PSBDYW1wYWlnbiByZXF1ZXN0cyBsaXN0IChyb2xlLWF3YXJlKSA9PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0Q2FtcGFpZ25SZXF1ZXN0cyhmb3JVc2VySWQ/OiBzdHJpbmcsIHJvbGU/OiBVc2VyUm9sZSkge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgKGFzeW5jICgpID0+IHtcclxuICAgIC8vIGTDuW5nIHJlYWREYigpIG7hu5lpIGLhu5lcclxuICAgIGNvbnN0IHJhdyA9IGF3YWl0IChhd2FpdCBpbXBvcnQoXCJmcy9wcm9taXNlc1wiKSkucmVhZEZpbGUoXHJcbiAgICAgIChhd2FpdCBpbXBvcnQoXCJwYXRoXCIpKS5qb2luKHByb2Nlc3MuY3dkKCksIFwiZGF0YVwiLCBcImRiLmpzb25cIiksXHJcbiAgICAgIFwidXRmOFwiXHJcbiAgICApXHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShyYXcpIGFzIERCU2hhcGVcclxuICB9KSgpXHJcblxyXG4gIC8vIENoxrBhIMSRxINuZyBuaOG6rXAgdGjDrCBraMO0bmcgdHLhuqMgZ8OsXHJcbiAgaWYgKCFmb3JVc2VySWQpIHJldHVybiBbXVxyXG5cclxuICAvLyBBZG1pbiAvIEF1ZGl0b3IgLyBPcmcgQWRtaW4g4oaSIHhlbSB04bqldCBj4bqjXHJcbiAgaWYgKHJvbGUgPT09IFwiU1VQRVJBRE1JTlwiIHx8IHJvbGUgPT09IFwiQVVESVRPUlwiIHx8IHJvbGUgPT09IFwiT1JHX0FETUlOXCIpIHtcclxuICAgIHJldHVybiBkYi5jYW1wYWlnblJlcXVlc3RzLnNvcnQoKGEsIGIpID0+IChhLmNyZWF0ZWRBdCA8IGIuY3JlYXRlZEF0ID8gMSA6IC0xKSlcclxuICB9XHJcblxyXG4gIC8vIERvbm9yIC8gdXNlciB0aMaw4budbmcg4oaSIGNo4buJIHhlbSByZXF1ZXN0IGPhu6dhIG3DrG5oXHJcbiAgcmV0dXJuIGRiLmNhbXBhaWduUmVxdWVzdHNcclxuICAgIC5maWx0ZXIoKHIpID0+IHIucmVxdWVzdGVkQnkgPT09IGZvclVzZXJJZClcclxuICAgIC5zb3J0KChhLCBiKSA9PiAoYS5jcmVhdGVkQXQgPCBiLmNyZWF0ZWRBdCA/IDEgOiAtMSkpXHJcbn1cclxuXHJcbi8vID09PT0gRG9uYXRpb25zID09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3REb25hdGlvbnModXNlcklkPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGNvbnN0IGFyciA9IHVzZXJJZCA/IGRiLmRvbmF0aW9ucy5maWx0ZXIoKGQpID0+IGQudXNlcklkID09PSB1c2VySWQpIDogZGIuZG9uYXRpb25zXHJcbiAgLy8gc29ydCBuZXdlc3QgZmlyc3RcclxuICByZXR1cm4gYXJyLnNvcnQoKGEsIGIpID0+IChhLmNyZWF0ZWRBdCA8IGIuY3JlYXRlZEF0ID8gMSA6IC0xKSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURvbmF0aW9uKHBhcmFtczoge1xyXG4gIHVzZXJJZDogc3RyaW5nXHJcbiAgY2FtcGFpZ25JZDogc3RyaW5nXHJcbiAgYW1vdW50OiBudW1iZXJcclxuICBwYXltZW50TWV0aG9kOiBEb25hdGlvbltcInBheW1lbnRNZXRob2RcIl1cclxuICBtZXNzYWdlPzogc3RyaW5nXHJcbn0pIHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcblxyXG4gIGNvbnN0IGNhbXBhaWduID0gZGIuY2FtcGFpZ25zLmZpbmQoKGMpID0+IGMuaWQgPT09IHBhcmFtcy5jYW1wYWlnbklkKVxyXG4gIGlmICghY2FtcGFpZ24pIHRocm93IG5ldyBFcnJvcihcIktow7RuZyB0w6xtIHRo4bqleSBjaGnhur9uIGThu4tjaFwiKVxyXG5cclxuICBjb25zdCBkb25hdGlvbjogRG9uYXRpb24gPSB7XHJcbiAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgY2FtcGFpZ25JZDogcGFyYW1zLmNhbXBhaWduSWQsXHJcbiAgICB1c2VySWQ6IHBhcmFtcy51c2VySWQsXHJcbiAgICBhbW91bnQ6IE1hdGgubWF4KDAsIE1hdGguZmxvb3IocGFyYW1zLmFtb3VudCB8fCAwKSksXHJcbiAgICBzdGF0dXM6IFwiRVNDUk9XRURcIixcclxuICAgIHR4SWQ6IGBUWE4tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCAxMCkudG9VcHBlckNhc2UoKX1gLFxyXG4gICAgcGF5bWVudE1ldGhvZDogcGFyYW1zLnBheW1lbnRNZXRob2QgfHwgXCJNT0NLX1FSXCIsXHJcbiAgICBtZXNzYWdlOiBwYXJhbXMubWVzc2FnZSxcclxuICAgIGNyZWF0ZWRBdDogbm93LFxyXG4gIH1cclxuXHJcbiAgZGIuZG9uYXRpb25zLnB1c2goZG9uYXRpb24pXHJcblxyXG4gIC8vIChEZW1vKSBVcGRhdGUgY2FtcGFpZ25cclxuICBjYW1wYWlnbi5yYWlzZWQgPSBNYXRoLm1heCgwLCAoY2FtcGFpZ24ucmFpc2VkIHx8IDApICsgZG9uYXRpb24uYW1vdW50KVxyXG4gIGNhbXBhaWduLnVwZGF0ZWRBdCA9IG5vd1xyXG5cclxuICAvLyBBY3Rpdml0eVxyXG4gIGRiLmFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICBpZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgdHlwZTogXCJET05BVElPTl9DUkVBVEVEXCIsXHJcbiAgICBhY3RvcklkOiBwYXJhbXMudXNlcklkLFxyXG4gICAgdGFyZ2V0VHlwZTogXCJDQU1QQUlHTlwiLFxyXG4gICAgdGFyZ2V0SWQ6IHBhcmFtcy5jYW1wYWlnbklkLFxyXG4gICAgbWV0YTogeyBhbW91bnQ6IGRvbmF0aW9uLmFtb3VudCwgdHhJZDogZG9uYXRpb24udHhJZCB9LFxyXG4gICAgY3JlYXRlZEF0OiBub3csXHJcbiAgfSlcclxuXHJcbiAgYXdhaXQgd3JpdGVEYihkYilcclxuICByZXR1cm4gZG9uYXRpb25cclxufVxyXG4iXSwibmFtZXMiOlsiY29va2llcyIsImp3dFZlcmlmeSIsInJhbmRvbVVVSUQiLCJwYXRoIiwiZnMiLCJTRUNSRVQiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiREJfUEFUSCIsImpvaW4iLCJjd2QiLCJlbnN1cmVEYiIsImFjY2VzcyIsIm1rZGlyIiwiZGlybmFtZSIsInJlY3Vyc2l2ZSIsIm5vdyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNlZWQiLCJ1c2VycyIsInVzZXJJZCIsImVtYWlsIiwicm9sZSIsIm5hbWUiLCJjYW1wYWlnbnMiLCJpZCIsInRpdGxlIiwic2x1ZyIsInN1bW1hcnkiLCJnb2FsIiwicmFpc2VkIiwic3RhdHVzIiwib3duZXJJZCIsInRhZ3MiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJjYW1wYWlnblJlcXVlc3RzIiwibm90aWZpY2F0aW9ucyIsImZvbGxvd3MiLCJhY3Rpdml0aWVzIiwiZG9uYXRpb25zIiwid3JpdGVGaWxlIiwiSlNPTiIsInN0cmluZ2lmeSIsImVuc3VyZUFycmF5IiwidiIsIkFycmF5IiwiaXNBcnJheSIsIm1pZ3JhdGVEYk9iamVjdCIsIm9iaiIsImNoYW5nZWQiLCJkYiIsImtleXMiLCJrIiwicmVhZERiIiwicmF3IiwicmVhZEZpbGUiLCJwYXJzZWQiLCJwYXJzZSIsIndyaXRlRGIiLCJuZXh0IiwidG1wIiwicmVuYW1lIiwiZ2V0QXV0aFVzZXIiLCJjb29raWVTdG9yZSIsInRva2VuIiwiZ2V0IiwidmFsdWUiLCJwYXlsb2FkIiwibGlzdENhbXBhaWducyIsImdldENhbXBhaWduQnlJZCIsImZpbmQiLCJjIiwidXBzZXJ0Q2FtcGFpZ24iLCJpbnB1dCIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplIiwicmVwbGFjZSIsImlkeCIsImZpbmRJbmRleCIsInB1c2giLCJyZXF1ZXN0TmV3Q2FtcGFpZ24iLCJwYXJhbXMiLCJyZXEiLCJkZXRhaWxzIiwicmVxdWVzdGVkQnkiLCJ0eXBlIiwiYWN0b3JJZCIsInRhcmdldFR5cGUiLCJ0YXJnZXRJZCIsIm1ldGEiLCJhcHByb3ZlQ2FtcGFpZ25SZXF1ZXN0IiwicmVxSWQiLCJyZWFzb24iLCJyIiwiRXJyb3IiLCJtZXNzYWdlIiwicmVhZCIsInJlamVjdENhbXBhaWduUmVxdWVzdCIsImxpc3ROb3RpZmljYXRpb25zIiwiZmlsdGVyIiwibiIsInNvcnQiLCJhIiwiYiIsIm5vdGlmeSIsImZvbGxvd0NhbXBhaWduIiwiY2FtcGFpZ25JZCIsImYiLCJvayIsInVuZm9sbG93Q2FtcGFpZ24iLCJsZW5ndGgiLCJnZXRGb2xsb3dpbmdEZXRhaWxzIiwiZm9sbG93SWRzIiwibWFwIiwiaW5jbHVkZXMiLCJsYXRlc3RBY3Rpdml0aWVzIiwic2xpY2UiLCJsaXN0Q2FtcGFpZ25SZXF1ZXN0cyIsImZvclVzZXJJZCIsImxpc3REb25hdGlvbnMiLCJhcnIiLCJkIiwiY3JlYXRlRG9uYXRpb24iLCJjYW1wYWlnbiIsImRvbmF0aW9uIiwiYW1vdW50IiwiTWF0aCIsIm1heCIsImZsb29yIiwidHhJZCIsInJhbmRvbSIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJwYXltZW50TWV0aG9kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/mock-db.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdonations%2Froute&page=%2Fapi%2Fdonations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdonations%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdonations%2Froute&page=%2Fapi%2Fdonations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdonations%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_linhn_MY_PROJECTs_vpbank_hackathon_2025_apps_fe_app_api_donations_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/donations/route.ts */ \"(rsc)/./app/api/donations/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/donations/route\",\n        pathname: \"/api/donations\",\n        filename: \"route\",\n        bundlePath: \"app/api/donations/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\linhn\\\\MY_PROJECTs\\\\vpbank-hackathon-2025\\\\apps\\\\fe\\\\app\\\\api\\\\donations\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_linhn_MY_PROJECTs_vpbank_hackathon_2025_apps_fe_app_api_donations_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZkb25hdGlvbnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmRvbmF0aW9ucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmRvbmF0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNsaW5obiU1Q01ZX1BST0pFQ1RzJTVDdnBiYW5rLWhhY2thdGhvbi0yMDI1JTVDYXBwcyU1Q2ZlJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNsaW5obiU1Q01ZX1BST0pFQ1RzJTVDdnBiYW5rLWhhY2thdGhvbi0yMDI1JTVDYXBwcyU1Q2ZlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUM2QztBQUMxSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcbGluaG5cXFxcTVlfUFJPSkVDVHNcXFxcdnBiYW5rLWhhY2thdGhvbi0yMDI1XFxcXGFwcHNcXFxcZmVcXFxcYXBwXFxcXGFwaVxcXFxkb25hdGlvbnNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2RvbmF0aW9ucy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2RvbmF0aW9uc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZG9uYXRpb25zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcbGluaG5cXFxcTVlfUFJPSkVDVHNcXFxcdnBiYW5rLWhhY2thdGhvbi0yMDI1XFxcXGFwcHNcXFxcZmVcXFxcYXBwXFxcXGFwaVxcXFxkb25hdGlvbnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdonations%2Froute&page=%2Fapi%2Fdonations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdonations%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdonations%2Froute&page=%2Fapi%2Fdonations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdonations%2Froute.ts&appDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Clinhn%5CMY_PROJECTs%5Cvpbank-hackathon-2025%5Capps%5Cfe&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();